(()=>{"use strict";var e={8896:(e,t,n)=>{n.r(t);var o=n(7706),i=n(7294),l=n(5815),r=n(9564),a=n(4942),s=n(5861),c=n(885),d=n(9321),u=n(2025),f=n(8094),h=n(6876),y=n(2582),g=n(5891),m=n(170),x=n(6123),b=n(6065);const p=function(e){return Math.floor(4*Math.random()).toString(),new Promise((function(t,n){var o={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({uid:e})};fetch("https://www.foodcrs.com/icebreak",o).then((function(e){return e.json()})).then((function(e){return t(e.icebreak)})).catch((function(e){return n(e)}))}))};const j=function(e,t,n,o){return Math.floor(4*Math.random()).toString(),new Promise((function(i,l){var r={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({uid:e,user:t,control:n,choosefood:o})};fetch("https://www.foodcrs.com/back",r).then((function(e){return e.json()})).then((function(e){return i(e.chatbot)})).catch((function(e){return l(e)}))}))};var w="I prefer the first one.",S="I prefer the second one.",C="I am OK with either of them.",k="I like neither of them.",v="I am glad that the recommendation works! Hope you enjoy the meal when you try it out!",T="I am glad you like my recommendation! Enjoy your meal when you try it out!",z="It seems like my recommendation skill needs some improvement, but thank you for your feedback. This is the end of the conversation.",A="Searching finished! Here are two recommendations:",I="Scroll up to check the two recommendations. Would you like to try any of them in the following days?",D="I got a better idea! Here are my recommendations:",P="Please scroll up to check my recommendations. Now would you like to try any of them in the following days?";const F=(0,n(270).default)((function(e){return{userId:null,starttime:null,setUserId:function(t){return e({userId:t})},setStarttime:function(t){return e({starttime:t})}}})),E=n.p+"static/media/openai-svgrepo-com.04ad457f0e1c677f769f.svg";var W=n(5893);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=!1,M=!0,L=!1,B="none",H="none",N="",_=g.default.get("window").width,Q=g.default.get("window").height,U=.65*Math.min(_/320,Q/640);var G=u.default.create({background:{flex:1,backgroundColor:"white",paddingHorizontal:10*U,flexDirection:"column",alignItems:"center",overflow:"scroll"},textContainer:{position:"absolute",top:.9*Q,height:.1*Q,backgroundColor:"white",paddingHorizontal:10*U,flexDirection:"row",alignItems:"center",zIndex:100},titleContainer:{position:"absolute",height:.1*Q,backgroundColor:"white",paddingHorizontal:10*U,flexDirection:"row",alignItems:"center",zIndex:100},buttonText:{fontFamily:"Arial",color:"white",textAlign:"center",textAlignVertical:"center",fontSize:16*U},bubbleText:{left:{fontFamily:"Arial",fontSize:16*U,color:"black"},right:{fontFamily:"Arial",fontSize:16*U,color:"black"}},imgText:{fontFamily:"Arial",fontSize:16*U,color:"black"},boldText:{fontFamily:"Arial",fontSize:16*U,color:"white",fontWeight:"bold"},text:{fontFamily:"Arial",fontSize:16*U,color:"black"},title:{fontFamily:"Arial",fontSize:40*U,color:"#597E52",fontWeight:"bold"},button:{backgroundColor:"#86A789",alignItems:"center",height:"75%",width:"41%",borderRadius:8.5*U,padding:10*U,borderColor:"#86A789",margintop:20*U},buttonsub:{backgroundColor:"#86A789",alignItems:"center",height:"75%",width:"33%",borderRadius:8.5*U,padding:10*U,borderColor:"#86A789",margintop:20*U},buttonsubShort:{backgroundColor:"#86A789",alignItems:"center",height:"75%",width:"9%",borderRadius:8.5*U,padding:10*U,borderColor:"#86A789",margintop:20*U},buttonsubMid:{backgroundColor:"#86A789",alignItems:"center",height:"75%",width:"11%",borderRadius:8.5*U,padding:10*U,borderColor:"#86A789",margintop:20*U},buttonsubPress:{backgroundColor:"#597E52"},waiting:{left:{backgroundColor:"white",borderColor:"black",borderWidth:1.5*U},right:{backgroundColor:"#D2E3C8"}},working:{left:{backgroundColor:"white",width:"65%",borderColor:"black",borderWidth:1.5*U},right:{backgroundColor:"#D2E3C8",width:"65%"}},inputToolbarContainer:{borderTopWidth:1*U,borderBottomWidth:1*U,borderColor:"black",marginTop:37*U},image:{width:500*U,height:300*U,marginRight:8*U},sendButton:{justifyContent:"center",alignItems:"center",backgroundColor:"white",marginBottom:9*U},sendButtonText:{color:"#597E52",fontSize:20*U,fontWeight:"bold"},avatarContainer:{width:60*U,height:60*U},avatar:{flex:1,width:null,height:null,resizeMode:"contain"},bot:{marginBottom:20*U,marginLeft:15*U,width:65*U,height:65*U}});const Y=function(e){var t=e.navigation,o=(0,i.useState)([]),l=(0,c.default)(o,2),r=l[0],a=l[1],u=(0,i.useState)(!1),g=(0,c.default)(u,2),q=g[0],Y=g[1],K=(0,i.useState)(!1),V=(0,c.default)(K,2),J=V[0],Z=V[1],$=(0,i.useState)(!1),X=(0,c.default)($,2),ee=X[0],te=X[1],ne=F().userId,oe=.7*_,ie={_id:1,name:"user"},le={_id:2,name:"chatbot",avatar:n(9298)},re=[{_id:2,name:"chatbot",avatar:n(9298)},{_id:2,name:"chatbot",avatar:n(6724)},{_id:2,name:"chatbot",avatar:n(3361)},{_id:2,name:"chatbot",avatar:n(1983)},{_id:2,name:"chatbot",avatar:n(4719)},{_id:2,name:"chatbot",avatar:n(5481)},{_id:2,name:"chatbot",avatar:n(94)}],ae=(0,i.useState)(!1),se=(0,c.default)(ae,2),ce=se[0],de=se[1],ue=(0,i.useState)(!1),fe=(0,c.default)(ue,2),he=fe[0],ye=fe[1],ge=(0,i.useState)(!1),me=(0,c.default)(ge,2),xe=me[0],be=me[1],pe=(0,i.useState)(!1),je=(0,c.default)(pe,2),we=je[0],Se=je[1],Ce=(0,i.useState)(!1),ke=(0,c.default)(Ce,2),ve=ke[0],Te=ke[1],ze=(0,i.useState)(!1),Ae=(0,c.default)(ze,2),Ie=Ae[0],De=Ae[1],Pe=(0,i.useState)(!1),Fe=(0,c.default)(Pe,2),Ee=Fe[0],We=Fe[1],qe=(0,i.useState)(!1),Oe=(0,c.default)(qe,2),Re=Oe[0],Me=Oe[1],Le=(0,i.useState)(!1),Be=(0,c.default)(Le,2),He=Be[0],Ne=Be[1];function _e(){return(_e=(0,s.default)((function*(){Ye("Typing",5);var e=yield p(ne);a([{_id:1,text:e,createdAt:new Date,user:le}]),Je()}))).apply(this,arguments)}function Qe(e,t){var n=t.indexOf(e);return-1!==n?t.slice(0,n)+t.slice(n+e.length):t}function Ue(e,t,n){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,s.default)((function*(e,t,n){var o=yield j(ne,e,t,n);if((o.includes(v)||o.includes(T)||o.includes(z))&&(R=!0),-1!=o.indexOf("[REC]")){var i="",l="";0==L&&(i=A,l=I,R=!0),1==L&&(i=D,l=P,R=!0),Je(),Ye(i,4);var r=o.split("[REC]"),a=r[0].split("[CAT]"),s=r[1].split("[CAT]"),c=a[0].split("[CLS]"),d=s[0].split("[CLS]"),u=c[0],f=c[1],h=d[0],y=d[1];B=u,H=h;Qe(u,f),Qe(h,y);Ve(a[1],u+"\n"+f),Ve(s[1],h+"\n"+y),Ye(l,4),L=!0}else{if(-1!=o.indexOf("[CAT]")){var g="",m="";0==w&&(g=A,m=I,R=!0),1==w&&(g=D,m=P,R=!0),Je(),Ye(g,4);var x=o.split("[CAT]"),b=x[0].split("[CLS]"),p=b[0],w=b[1];B=p,H="loss[ERROR]"+w,Ve(x[1],p+"\n"+w),Ye(m,4),w=!0}if(o.includes(v)||o.includes(T)||o.includes(z))(o.includes(v)||o.includes(T))&&(Je(),Ye(o,3)),o.includes(z)&&(Je(),Ye(o,6));else{console.log("index:**",0),Je(),Ye(o,0)}}M=!1}))).apply(this,arguments)}function Ye(e,t){var n={_id:Math.round(1e6*Math.random()),text:e,createdAt:new Date,user:le};"none"!=t&&(n={_id:Math.round(1e6*Math.random()),text:e,createdAt:new Date,user:re[t]}),N=e,a((function(e){return x.GiftedChat.append(e,n)}))}function Ke(e){var t={_id:Math.round(1e6*Math.random()),text:e,createdAt:new Date,user:ie};a((function(e){return x.GiftedChat.append(e,t)}))}function Ve(e,t){var n={_id:Math.round(1e6*Math.random()),image:e,text:t,createdAt:new Date,user:re[4]};a((function(e){return x.GiftedChat.append(e,n)}))}function Je(){a((function(e){return e.filter((function(e){return"Typing"!==e.text&&"Got you. Searching for food... This process may take a while"!==e.text&&"I see. Trying to search for alternative options... This process may take a while"!==e.text}))}))}function Ze(e,t,n,o){if(e.startsWith(t)){var i=e.split("\n");return(0,W.jsxs)(h.default,{children:[(0,W.jsx)(h.default,{style:{fontWeight:o},children:t}),i.length>1&&(0,W.jsx)(h.default,{children:"\n"}),i.slice(1).map((function(e,t){return(0,W.jsxs)(h.default,{children:[t>0&&(0,W.jsx)(h.default,{children:"\n"}),e]},t)}))]})}if(e.startsWith(n)){var l=e.split("\n");return(0,W.jsxs)(h.default,{children:[(0,W.jsx)(h.default,{style:{fontWeight:o},children:n}),l.length>1&&(0,W.jsx)(h.default,{children:"\n"}),l.slice(1).map((function(e,t){return(0,W.jsxs)(h.default,{children:[t>0&&(0,W.jsx)(h.default,{children:"\n"}),e]},t)}))]})}return e}(0,i.useEffect)((function(){M=!0,function(){_e.apply(this,arguments)}(),M=!1}),[]);var $e=(0,i.useCallback)((function(e){var t=e[0],n=O(O({_id:Math.round(1e6*Math.random())},t),{},{createdAt:new Date,user:ie});a((function(e){return x.GiftedChat.append(e,n)})),console.log("control:",M);var o=n.text,i="none";0==M&&((o==w||o==S||C)&&(i="<left>"),o==k&&(i="<right>"),M=!0,N.includes("OK, do you have anything else to add before I recommend some food for you?")||"Could you tell me why you don't like these foods? I'll try to refine the recommendation based on your input. Due to the token limitation, the next round will be the last-round of recommendations."==N?N.includes("OK, do you have anything else to add before I recommend some food for you?")?Ye("Got you. Searching for food... This process may take a while",5):Ye("I see. Trying to search for alternative options... This process may take a while",5):Ye("Typing",5),Ue(o,i,"none"))}),[]),Xe=function(e){var t=e.currentMessage,n=e.imageProps,o=t.text,l=null;if(l="Typing"==o||"Got you. Searching for food... This process may take a while"==o||"I see. Trying to search for alternative options... This process may take a while"==o||o.length<97?G.waiting:G.working,o==A||o==D)return console.log("prefix"),(0,W.jsx)(d.default,{style:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",padding:8*U,backgroundColor:"white",width:"38%",borderTopRightRadius:15*U,borderBottomRightRadius:15*U,borderTopLeftRadius:15*U,borderColor:"black",borderWidth:1.5*U,marginLeft:23*U},children:(0,W.jsx)(h.default,{style:G.imgText,children:o})});if(t.image){var r=(0,i.useState)(!0),a=(0,c.default)(r,2),s=a[0],u=a[1];return(0,W.jsxs)(d.default,{style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:8*U,backgroundColor:"white",width:"61%",borderTopRightRadius:15*U,borderBottomRightRadius:15*U,borderColor:"black",borderWidth:1.5*U,marginLeft:23*U},children:[s&&(0,W.jsxs)(d.default,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,W.jsx)(h.default,{style:G.imgText,children:"Loading the food image "}),(0,W.jsx)(f.default,{style:{justifyContent:"flex-start",marginLeft:5},size:"small",color:"#597E52"})]}),(0,W.jsx)(m.default,O({source:{uri:t.image},style:{width:_,height:.15*_,marginRight:8*U},onLoad:function(){return u(!1)},resizeMode:"contain"},n)),(0,W.jsx)(h.default,{style:G.imgText,children:Ze(o,B,H,"bold")})]})}return(0,W.jsx)(x.Bubble,O(O({},e),{},{wrapperStyle:l,textStyle:G.bubbleText}))};return(0,W.jsx)(b.SafeAreaProvider,{children:(0,W.jsxs)(d.default,{style:G.background,children:[(0,W.jsx)(d.default,{style:G.titleContainer,children:(0,W.jsx)(h.default,{style:G.title,children:"Let's chat!"})}),(0,W.jsx)(d.default,{style:{position:"absolute",top:.1*Q,height:.8*Q,backgroundColor:"white",paddingHorizontal:10*U,borderRadius:15*U,borderColor:"black",borderWidth:2*U,width:oe,zIndex:200},children:(0,W.jsx)(x.GiftedChat,{messages:r,onSend:function(e){return $e(e)},user:ie,renderBubble:function(e){return(0,W.jsx)(Xe,O({},e))},renderSend:function(e){return(0,W.jsx)(x.Send,O(O({},e),{},{children:(0,W.jsx)(d.default,{style:G.sendButton,children:(0,W.jsx)(h.default,{style:G.sendButtonText,children:"Send"})})}))},renderInputToolbar:function(e){if(1!=R)return(0,W.jsx)(d.default,{style:G.inputToolbarContainer,children:(0,W.jsx)(x.InputToolbar,O({},e))});console.log("end")},renderMessageText:function(e){var n=e.currentMessage.text;if("Typing"==n||"Got you. Searching for food... This process may take a while"==n||"I see. Trying to search for alternative options... This process may take a while"==n)return(0,W.jsxs)(d.default,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},children:[(0,W.jsx)(x.MessageText,O({},e)),(0,W.jsx)(f.default,{style:{justifyContent:"flex-start",marginLeft:-10*U},size:"small",color:"#597E52"}),(0,W.jsx)(h.default,{children:"    "})]});if(n==I)return(0,W.jsxs)(d.default,{children:[(0,W.jsx)(x.MessageText,O({},e)),(0,W.jsxs)(d.default,{style:{flexDirection:"row",justifyContent:"center",marginTop:10*U},children:[(0,W.jsx)(y.default,{style:[G.buttonsub,ce&&G.buttonsubPress],onPress:function(){de(!0),R=!1,Y(!0),Ke(w),Ue(w,"<left>","First: "+B),Ye("Typing",5)},disabled:q,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"First Recommendation"})}),(0,W.jsx)(h.default,{style:G.buttonText,children:"    "}),(0,W.jsx)(y.default,{style:[G.buttonsub,he&&G.buttonsubPress],onPress:function(){ye(!0),R=!1,Y(!0),Ke(S),Ue(S,"<left>","Second: "+H),Ye("Typing",5)},disabled:q,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"Second Recommendation"})}),(0,W.jsx)(h.default,{style:G.buttonText,children:"    "}),(0,W.jsx)(y.default,{style:[G.buttonsubShort,xe&&G.buttonsubPress],onPress:function(){be(!0),R=!1,Y(!0),Ke(C),Ue(C,"<left>","Either: "+B+"[or]"+H),Ye("Typing",5)},disabled:q,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"Either"})}),(0,W.jsx)(h.default,{style:G.buttonText,children:"    "}),(0,W.jsx)(y.default,{style:[G.buttonsubMid,we&&G.buttonsubPress],onPress:function(){Se(!0),R=!1,Y(!0),Ke(k),Ue(k,"<right>","none"),Ye("Typing",5)},disabled:q,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"Neither"})})]})]});if(n==P)return(0,W.jsxs)(d.default,{children:[(0,W.jsx)(x.MessageText,O({},e)),(0,W.jsxs)(d.default,{style:{flexDirection:"row",justifyContent:"center",marginTop:10*U},children:[(0,W.jsx)(y.default,{style:[G.buttonsub,ve&&G.buttonsubPress],onPress:function(){Te(!0),R=!1,Z(!0),Ke(w),Ue(w,"none","First: "+B),Ye("Typing",5)},disabled:J,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"First Recommendation"})}),(0,W.jsx)(h.default,{style:G.buttonText,children:"    "}),(0,W.jsx)(y.default,{style:[G.buttonsub,Ie&&G.buttonsubPress],onPress:function(){De(!0),R=!1,Z(!0),Ke(S),Ue(S,"none","Second: "+H),Ye("Typing",5)},disabled:J,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"Second Recommendation"})}),(0,W.jsx)(h.default,{style:G.buttonText,children:"    "}),(0,W.jsx)(y.default,{style:[G.buttonsubShort,Ee&&G.buttonsubPress],onPress:function(){We(!0),R=!1,Z(!0),Ke(C),Ue(C,"none","Either: "+B+"[or]"+H),Ye("Typing",5)},disabled:J,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"Either"})}),(0,W.jsx)(h.default,{style:G.buttonText,children:"    "}),(0,W.jsx)(y.default,{style:[G.buttonsubMid,Re&&G.buttonsubPress],onPress:function(){Me(!0),R=!1,Z(!0),Ke(k),Ue(k,"none","none"),Ye("Typing",5)},disabled:J,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"Neither"})})]})]});if(n.includes(v)||n.includes(T)||n.includes(z)){var o="Here are the dietary keywords for you",i=n.indexOf(o)+37+1;return n.includes(o)?(0,W.jsxs)(d.default,{children:[(0,W.jsxs)(h.default,{style:{fontFamily:"Arial",fontSize:16*U,color:"black",padding:8*U},children:[(0,W.jsx)(h.default,{children:n.substring(0,i)}),(0,W.jsx)(h.default,{style:{fontWeight:"bold"},children:n.substring(i)})]}),(0,W.jsx)(d.default,{style:{flexDirection:"row",justifyContent:"center",marginTop:10*U},children:(0,W.jsx)(y.default,{style:[G.button,He&&{backgroundColor:"#597E52"}],onPress:function(){Ne(!0),te(!0),t.navigate("SmartEats-Feedback")},disabled:ee,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"Next step: provide feedback"})})})]}):(0,W.jsxs)(d.default,{children:[(0,W.jsx)(x.MessageText,O({},e)),(0,W.jsx)(d.default,{style:{flexDirection:"row",justifyContent:"center",marginTop:10*U},children:(0,W.jsx)(y.default,{style:[G.button,He&&{backgroundColor:"#597E52"}],onPress:function(){Ne(!0),te(!0),t.navigate("SmartEats-Feedback")},disabled:ee,children:(0,W.jsx)(h.default,{style:G.buttonText,children:"Next step: provide feedback"})})})]})}return(0,W.jsx)(d.default,{children:(0,W.jsx)(x.MessageText,O({},e))})},renderAvatar:function(e){return(0,W.jsx)(d.default,{style:G.avatarContainer,children:(0,W.jsx)(m.default,{source:e.currentMessage.user.avatar,style:G.avatar})})},multiline:!0})}),(0,W.jsxs)(d.default,{style:G.textContainer,children:[(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:14*U,color:"black",left:.08*_*U},children:"Powered by "}),(0,W.jsx)(m.default,{source:E,style:{width:22*U,height:22*U,left:.08*_*U}}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:14*U,color:"black",left:.08*_*U},children:" OpenAI GPT-4 API and DALL\xb7E3, the chatbot icons are designed by Sergey Stepanov / Alamy Stock Vector."})]})]})})};var K=n(5456),V=n(1494),J=n(8138);const Z=function(e,t,n,o,i,l,r,a,s,c,d,u,f,h,y,g,m,x,b,p,j,w,S){return Math.floor(4*Math.random()).toString(),new Promise((function(C,k){var v={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({uid:e,acca:t,expa:n,expb:o,expc:i,intera:l,usefa:r,usefb:a,trusta:s,trustb:c,eata:d,useia:u,useib:f,useic:h,quaa:y,ada:g,adb:m,time:x,edul:b,workf:p,race:j,feedback:w,extra:S})};fetch("https://www.foodcrs.com/end",v).then((function(e){return e.json()})).then((function(e){return C(e.status)})).catch((function(e){return k(e)}))}))};var $={time:"1. The responding time of the CA is acceptable.",ResNuturalness:"2. The language of the CA's responses is natural.",ResKnowledge:"3. The CA's responses contained rich nutritional knowledge, and it was flexible in interpreting it.",RQTrans:"4. The CA can naturally transition from responding to previous messages to addressing new questions.",QQTrans:"5. The CA can smoothly transition between questions, maintaining a coherent and natural flow in the conversation.",QNARecTrans:"6. The CA can smoothly transition from chatting to making recommendations.",RecAcc:"7. The foods the CA recommends to me match my preferences and health conditions.",RecNovelo:"8. In each round, the second food recommended to me are novel.",RecNovelt:"9. The recommender system helped me discover new dishes.",RecDiv:"10. In each round, the two foods recommended to me are diverse.",Adequacy:"11. I found it easy to inform the CA what I like or dislike.",SugQualityo:"12. The CA gave me good dietary suggestions.",SugQualityt:"13. Following the dietary suggestions from the CA is easy.",ExpQualityo:"14. The text explanation of the food recommendations was sufficient for me to make a decision.",ExpQualityt:"15. I understand why these foods are recommended to me.",ImgQuality:"16. I am satisfied with the images of the recommended foods.",EatIntent:"17. I would like to eat the foods that the CA recommended in the following days.",Satisfaction:"18. Overall, I am satisfied with the recommender.",Useinentiona:"19. I would like to use the CA for dietary recommendations again.",Extra:"20. I found it difficult to inform the CA what I like or dislike.",Useinentionb:"21. I would like to use the CA for dietary recommendations frequently if possible.",Useinentionc:"22. I would like to tell my friends about this CA for dietary recommendations.",trust:"23. I am convinced of the items recommended to me.",q1bl:"24. What is your highest level of education?",q2bl:"25. Which of the following best describes your focus of work?",q3bl:"26. Which race/ethnicity best describes you?",q5bl:"27. Do you have any additional thoughts and feedback on this chatbot-based recommender system? (more than 5 words)"},X={prefix:"Before concluding the survey, please scroll down to answer all of the following questions so that we can make improvements to the system.",fb1:"1, What do you think of the overall recommendation quality?",fb2:"2, What do you think of the overall chatbot intelligence?",fb3:"3, What do you think of the overall chatting experience?",q1:"4, What is your highest level of education?",q2:"5, Which of the following best describes your focus of work?",q3:"6, Which race/ethnicity best describes you?"},ee={notfinish:"Please complete all the screening questions before proceeding to the survey.",notqali:"Sorry :( It looks like you do not meet the study criteria.",age:"Please enter a valid age (over 18 and below 120).",height:"Please enter a valid height (over 100cm and below 220cm).",weight:"Please enter a valid weight (over 30kg and below 150kg).",name:"Please enter your nickname.",email:"Please enter a valid email address.",gender:"Please select a valid biological sex.",country:"Please select a valid country name.",region:"Please select a valid region name.",rec:"Please rate and review the recommendation quality.",int:"Please rate and review the chatbot intelligence.",exp:"Please rate and review your interacting experience.",edu:"Please provide some information about your education level.",work:"Please provide some information about your focus of work.",ra:"Please provide some information about your ethnicity, if you do not want to tell us about this, please select 'Prefer not to say'.",cusp:"Please select the personality to customize the chatbot according to your preference.",cuss:"Please select the speaking style to customize the chatbot according to your preference.",cusiden:"Please select the identity to customize the chatbot according to your preference."},te=g.default.get("window").width,ne=g.default.get("window").height,oe=.65*Math.min(te/320,ne/640),ie=u.default.create({question:{fontFamily:"Arial",fontSize:16*oe,color:"black",fontWeight:"bold",paddingHorizontal:75*oe},checkbox:{marginLeft:75*oe,height:16*oe,width:16*oe},checkText:{fontFamily:"Arial",color:"black",fontSize:16*oe}});const le=function(e){var t=e.question,n=e.options,o=e.onChange,l=e.containerStyle,r=(0,i.useState)(null),a=(0,c.default)(r,2),s=a[0],u=a[1],f=function(e){u(e),o&&o(e)};return(0,W.jsxs)(d.default,{style:l,children:[(0,W.jsx)(h.default,{style:ie.question,children:t}),n.map((function(e,t){return(0,W.jsx)(d.default,{style:{flexDirection:"row",alignItems:"center"},children:(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:s===e,style:ie.checkbox,onChange:function(){return f(e)}}),(0,W.jsx)(h.default,{style:ie.checkText,children:e})]})},t)}))]})};var re=g.default.get("window").width,ae=g.default.get("window").height,se=.65*Math.min(re/320,ae/640),ce=u.default.create({question:{fontFamily:"Arial",fontSize:16*se,color:"black",fontWeight:"bold",paddingHorizontal:75*se},checkbox:{marginLeft:75*se,height:16*se,width:16*se},checkText:{fontFamily:"Arial",color:"black",fontSize:16*se}});const de=function(e){var t=e.question,n=e.options,o=e.onChange,l=(0,i.useState)(null),r=(0,c.default)(l,2),a=r[0],s=r[1],u=function(e){s(e),o&&o(e)};return(0,W.jsxs)(d.default,{children:[(0,W.jsx)(h.default,{style:ce.question,children:t}),n.map((function(e,t){return(0,W.jsx)(d.default,{style:{flexDirection:"row",alignItems:"center"},children:(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:a===e,style:ce.checkbox,onChange:function(){return u(e)}}),(0,W.jsx)(h.default,{style:ce.checkText,children:e})]})},t)}))]})};var ue=n(9219),fe=n.n(ue),he=g.default.get("window").width,ye=g.default.get("window").height,ge=.65*Math.min(he/320,ye/640),me=u.default.create({container:{flexDirection:"column",alignItems:"center",justifyContent:"center"},sliderContainer:{position:"absolute",zIndex:1,alignItems:"center",justifyContent:"center",width:500*ge,marginLeft:130*ge,marginTop:20*ge},circleContainer:{position:"absolute",zIndex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:500*ge,marginLeft:130*ge,marginTop:20*ge},question:{fontFamily:"Arial",fontSize:17*ge,color:"black",fontWeight:"bold",marginLeft:75*ge},slider:{width:"100%"},scaleMarksContainer:{position:"absolute",zIndex:1,flexDirection:"row",justifyContent:"center",width:500*ge,marginLeft:130*ge,marginTop:50*ge},scaleMarkText:{fontFamily:"Arial",color:"black",fontSize:14*ge},progressText:{fontFamily:"Arial",color:"black",fontSize:16*ge,fontWeight:"bold",marginTop:8*ge,marginLeft:75*ge},button:{backgroundColor:"#597E52",borderRadius:5*ge,marginTop:20*ge},buttonText:{color:"white",fontWeight:"bold",textAlign:"center"},thumbStyle:{width:15*ge,height:15*ge,borderRadius:7.5*ge},circle:{position:"absolute",width:15*ge,height:15*ge,borderRadius:7.5*ge,marginTop:15*ge}});const xe=function(e){var t=e.question,n=e.onChange,o=e.containerStyle,l=(0,i.useState)(3),r=(0,c.default)(l,2),a=r[0],s=r[1],u=(0,i.useState)("gray"),f=(0,c.default)(u,2),y=f[0],g=f[1],m=(0,i.useState)(!1),x=(0,c.default)(m,2),b=x[0],p=x[1],j=a>=0&&b?"#D2E3C8":"gray",w=a>=1&&b?"#D2E3C8":"gray",S=a>=2&&b?"#D2E3C8":"gray",C=a>=3&&b?"#D2E3C8":"gray",k=a>=4&&b?"#D2E3C8":"gray",v=a>=5&&b?"#D2E3C8":"gray",T=a>=6&&b?"#D2E3C8":"gray",z=function(e){switch(e){case 0:return"strongly disagree";case 1:return"disagree";case 2:return"slightly disagree";case 3:default:return"neutral";case 4:return"slightly agree";case 5:return"agree";case 6:return"strongly agree"}};return(0,W.jsxs)(d.default,{style:o,children:[(0,W.jsx)(d.default,{style:{flex:.2,flexDirection:"column"},children:(0,W.jsx)(h.default,{style:me.question,children:t})}),(0,W.jsxs)(d.default,{style:{flex:1,flexDirection:"column",marginTop:20*ge},children:[(0,W.jsxs)(d.default,{style:me.circleContainer,children:[(0,W.jsx)(d.default,{style:[me.circle,{left:"0%",backgroundColor:j}]}),(0,W.jsx)(d.default,{style:[me.circle,{left:"15.995%",backgroundColor:w}]}),(0,W.jsx)(d.default,{style:[me.circle,{left:"32.105%",backgroundColor:S}]}),(0,W.jsx)(d.default,{style:[me.circle,{left:"48.525%",backgroundColor:C}]}),(0,W.jsx)(d.default,{style:[me.circle,{left:"64.410%",backgroundColor:k}]}),(0,W.jsx)(d.default,{style:[me.circle,{left:"80.475%",backgroundColor:v}]}),(0,W.jsx)(d.default,{style:[me.circle,{left:"97.05%",backgroundColor:T}]})]}),(0,W.jsx)(d.default,{style:me.sliderContainer,children:(0,W.jsx)(fe(),{style:me.slider,minimumValue:0,maximumValue:6,step:1,value:a,onValueChange:function(e){s(e)},onSlidingComplete:function(e){p(!0),g("#597E52"),n(z(e))},minimumTrackTintColor:b?"#D2E3C8":"gray",maximumTrackTintColor:"gray",thumbTintColor:y,thumbStyle:me.thumbStyle})}),(0,W.jsxs)(d.default,{style:me.scaleMarksContainer,children:[(0,W.jsx)(h.default,{style:[me.scaleMarkText,{left:"-35%"}],children:"strongly disagree"}),(0,W.jsx)(h.default,{style:[me.scaleMarkText,,{left:"-1.5%"}],children:"neutral"}),(0,W.jsx)(h.default,{style:[me.scaleMarkText,{left:"33%"}],children:"strongly agree"})]})]}),(0,W.jsx)(d.default,{style:{marginTop:80*ge},children:(0,W.jsxs)(h.default,{style:me.progressText,children:["current choice: ",(0,W.jsx)(h.default,{style:{color:"#597E52"},children:b?z(a):""})]})})]})};var be=g.default.get("window").width,pe=g.default.get("window").height,je=.65*Math.min(be/320,pe/640);function we(e){var t=e.navigation,n=.8*be,o=.8*pe,l=.1*pe,r=(0,i.useState)(""),a=(0,c.default)(r,2),u=a[0],f=a[1],g=(0,i.useState)(""),m=(0,c.default)(g,2),x=m[0],b=m[1],p=(0,i.useState)(""),j=(0,c.default)(p,2),w=j[0],S=j[1],C=(0,i.useState)(""),k=(0,c.default)(C,2),v=k[0],T=k[1],z=(0,i.useState)(""),A=(0,c.default)(z,2),I=A[0],D=A[1],P=(0,i.useState)(""),E=(0,c.default)(P,2),q=E[0],O=E[1],R=(0,i.useState)(""),M=(0,c.default)(R,2),L=M[0],B=M[1],H=(0,i.useState)(""),N=(0,c.default)(H,2),_=N[0],Q=N[1],U=(0,i.useState)(""),G=(0,c.default)(U,2),Y=G[0],te=G[1],ne=(0,i.useState)(""),oe=(0,c.default)(ne,2),ie=oe[0],re=oe[1],ae=(0,i.useState)(""),se=(0,c.default)(ae,2),ce=se[0],ue=se[1],fe=(0,i.useState)(""),he=(0,c.default)(fe,2),ye=he[0],ge=he[1],me=(0,i.useState)(""),we=(0,c.default)(me,2),Ce=we[0],ke=we[1],ve=(0,i.useState)(""),Te=(0,c.default)(ve,2),ze=Te[0],Ae=Te[1],Ie=(0,i.useState)(""),De=(0,c.default)(Ie,2),Pe=De[0],Fe=De[1],Ee=(0,i.useState)(""),We=(0,c.default)(Ee,2),qe=We[0],Oe=We[1],Re=(0,i.useState)(""),Me=(0,c.default)(Re,2),Le=Me[0],Be=Me[1],He=(0,i.useState)(""),Ne=(0,c.default)(He,2),_e=Ne[0],Qe=Ne[1],Ue=(0,i.useState)(""),Ge=(0,c.default)(Ue,2),Ye=Ge[0],Ke=Ge[1],Ve=(0,i.useState)(""),Je=(0,c.default)(Ve,2),Ze=Je[0],$e=Je[1],Xe=(0,i.useState)(""),et=(0,c.default)(Xe,2),tt=et[0],nt=et[1],ot=(0,i.useState)(""),it=(0,c.default)(ot,2),lt=it[0],rt=it[1],at=(0,i.useState)(""),st=(0,c.default)(at,2),ct=st[0],dt=st[1],ut=(0,i.useState)(""),ft=(0,c.default)(ut,2),ht=ft[0],yt=ft[1],gt=(0,i.useState)(""),mt=(0,c.default)(gt,2),xt=mt[0],bt=mt[1],pt=(0,i.useState)(""),jt=(0,c.default)(pt,2),wt=jt[0],St=jt[1],Ct=(0,i.useState)(""),kt=(0,c.default)(Ct,2),vt=kt[0],Tt=kt[1],zt=(0,i.useState)(""),At=(0,c.default)(zt,2),It=At[0],Dt=At[1],Pt=(0,i.useState)(""),Ft=(0,c.default)(Pt,2),Et=Ft[0],Wt=Ft[1],qt=F().userId,Ot=(0,i.useState)("Submit your feedback"),Rt=(0,c.default)(Ot,2),Mt=Rt[0],Lt=Rt[1],Bt=(0,i.useState)(!1),Ht=(0,c.default)(Bt,2),Nt=Ht[0],_t=Ht[1],Qt=(0,i.useState)(!1),Ut=(0,c.default)(Qt,2),Gt=Ut[0],Yt=Ut[1],Kt=(0,i.useState)("gray"),Vt=(0,c.default)(Kt,2),Jt=Vt[0],Zt=Vt[1];(0,i.useEffect)((function(){""!=x&&""!=w&&""!=v&&""!=I&&""!=q&&""!=L&&""!=_&&""!=Y&&""!=ie&&""!=ce&&""!=ye&&""!=Ce&&""!=ze&&""!=Pe&&""!=qe&&""!=Le&&""!=_e&&""!=Ye&&""!=Ze&&""!=tt&&""!=lt&&""!=ct&&""!=xt&&""!=wt&&""!=vt&&""!=It&&""!=ht?(Zt("#86A789"),f("")):Zt("gray")}),[x,w,v,I,q,L,_,Y,ie,ce,ye,Ce,ze,Pe,qe,Le,_e,Ye,Ze,tt,lt,ct,xt,wt,vt,It,Et,ht]);return(0,W.jsx)(J.default,{style:{flex:1},children:(0,W.jsxs)(d.default,{style:Se.container,children:[(0,W.jsx)(d.default,{style:[Se.titleContainer,{height:l}],children:(0,W.jsx)(h.default,{style:Se.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,W.jsxs)(V.default,{contentContainerStyle:{height:o,backgroundColor:"white",paddingHorizontal:10*je,borderRadius:15*je,width:n,borderWidth:2*je,borderColor:"black",flexDirection:"column",justifyContent:"flex-start",overflow:"scroll",alignSelf:"center"},showsVerticalScrollIndicator:!0,children:[(0,W.jsx)(d.default,{style:Se.subTitleContainer,children:(0,W.jsx)(h.default,{style:Se.subTitle,children:X.prefix})}),(0,W.jsx)(xe,{question:$.time,onChange:function(e){console.log("Selected option:",e),dt(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.ResNuturalness,onChange:function(e){console.log("Selected option:",e),b(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.ResKnowledge,onChange:function(e){console.log("Selected option:",e),S(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.RQTrans,onChange:function(e){console.log("Selected option:",e),T(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.QQTrans,onChange:function(e){console.log("Selected option:",e),D(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.QNARecTrans,onChange:function(e){console.log("Selected option:",e),O(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.RecAcc,onChange:function(e){console.log("Selected option:",e),B(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.RecNovelo,onChange:function(e){console.log("Selected option:",e),Q(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.RecNovelt,onChange:function(e){console.log("Selected option:",e),te(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.RecDiv,onChange:function(e){console.log("Selected option:",e),re(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.Adequacy,onChange:function(e){console.log("Selected option:",e),ue(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.SugQualityo,onChange:function(e){console.log("Selected option:",e),ge(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.SugQualityt,onChange:function(e){console.log("Selected option:",e),ke(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.ExpQualityo,onChange:function(e){console.log("Selected option:",e),Ae(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.ExpQualityt,onChange:function(e){console.log("Selected option:",e),Fe(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.ImgQuality,onChange:function(e){console.log("Selected option:",e),Oe(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.EatIntent,onChange:function(e){console.log("Selected option:",e),Be(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.Satisfaction,onChange:function(e){console.log("Selected option:",e),Qe(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.Useinentiona,onChange:function(e){console.log("Selected option:",e),Ke(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.Extra,onChange:function(e){console.log("Selected option:",e),yt(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.Useinentionb,onChange:function(e){console.log("Selected option:",e),$e(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.Useinentionc,onChange:function(e){console.log("Selected option:",e),nt(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(xe,{question:$.trust,onChange:function(e){console.log("Selected option:",e),rt(e)},containerStyle:Se.valcontainer}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsxs)(d.default,{style:Se.valcontainer,children:[(0,W.jsx)(de,{question:$.q1bl,options:["High school diploma / GED","Associate degree","Bachelor's degree","Trade school certification","Master's degree or higher education","Other (please specify):"],onChange:function(e){console.log("Selected option:",e),bt(e)}}),(0,W.jsxs)("div",{className:"input-line",children:[(0,W.jsx)("input",{type:"text",value:Et,onChange:function(e){Wt(e.target.value)},placeholder:"Please enter specific information here.",style:Se.input}),(0,W.jsx)(d.default,{style:Se.line})]})]}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(le,{question:$.q2bl,options:["Computer Science / Engineering","Creative Media / Design","Environmental Science","Physics / Chemistry / Biology","Business / Finance","Law","Medical Science / Healthcare","Publishing","Education","Social Science / Humanity","Service industry"],onChange:function(e){console.log("Selected option:",e),St(e)},containerStyle:[Se.valcontainer,{marginTop:5}]}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsx)(le,{question:$.q3bl,options:["American Indian or Alaskan Native","Asian","Black or African American","Caucasian or White","Hispanic or Latino","Native Hawaiian or Other Pacific Islander","Multiracial / Other","Prefer not to say"],onChange:function(e){console.log("Selected option:",e),Tt(e)},containerStyle:[Se.valcontainer,{marginTop:5}]}),(0,W.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,W.jsxs)(d.default,{style:[Se.valcontainer,{marginTop:10}],children:[(0,W.jsx)(h.default,{style:[Se.question,{marginBottom:10}],children:$.q5bl}),(0,W.jsxs)("div",{className:"input-line",children:[(0,W.jsx)("input",{type:"text",value:It,onChange:function(e){Dt(e.target.value)},placeholder:"Please enter your feedback here.",style:Se.input}),(0,W.jsx)(d.default,{style:Se.line})]})]}),(0,W.jsx)(d.default,{style:Se.valcontainer,children:(0,W.jsx)(h.default,{style:Se.warntexts,children:u})})]}),(0,W.jsx)(d.default,{style:[Se.bottomContainer,{height:l}],children:(0,W.jsx)(y.default,{style:[{marginRight:.1*be,width:.125*be,height:.03*pe,backgroundColor:Jt,justifyContent:"center",alignItems:"center"},Gt&&{backgroundColor:"#597E52"}],onFocus:function(){Yt(!0)},onBlur:function(){Yt(!1)},onPress:(0,s.default)((function*(){if(""!=x&&""!=w&&""!=v&&""!=I&&""!=q&&""!=L&&""!=_&&""!=Y&&""!=ie&&""!=ce&&""!=ye&&""!=Ce&&""!=ze&&""!=Pe&&""!=qe&&""!=Le&&""!=_e&&""!=Ye&&""!=Ze&&""!=tt&&""!=lt&&""!=ct&&""!=xt&&""!=wt&&""!=vt&&""!=It&&""!=ht){var e=It.trim().split(" ").length;if(console.log("words:",e),"Other (please specify):"==xt&&""==Et||e<5)f(e>=5?ee.edu:"Please enter more than 5 words in your feedback.");else if(1==!/^(?=.*[a-zA-Z])[\w\s.,?!;:'"()-]+$/.test(It))f("Please enter meaningful thoughts and feedback.");else{_t(!0);var n=yield Z(qt,x,w,v,I,q,L,_,Y,ie,ce,ye,Ce,ze,Pe,qe,Le,_e,Ye,Ze,tt,lt,ht,ct,xt+"("+Et+")",wt,vt,It,ht);console.log("status",n),f(""),Lt("Feedback submitted!"),t.navigate("SmartEats-Finish")}}else f("Please finish the survey, thanks!")})),disabled:Nt,children:(0,W.jsx)(h.default,{style:Se.buttonText,children:Mt})})}),(0,W.jsx)(K.default,{style:"auto"})]})})}var Se=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"white",alignSelf:"center"},valcontainer:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white",marginBottom:10*je},bottomContainer:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},subTitleContainer:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white",alignSelf:"stretch",marginTop:15*je,marginBottom:15*je},subTitle:{fontFamily:"Arial",fontSize:18*je,color:"#597E52",fontWeight:"bold",marginLeft:75*je},title:{fontFamily:"Arial",fontSize:40*je,color:"#597E52",fontWeight:"bold"},input:{fontSize:16*je,border:"none",width:"200%",height:"100%",marginLeft:75*je,outlineWidth:"none"},line:{width:"200%",height:1*je,backgroundColor:"black",marginLeft:75*je,borderWidth:1*je},question:{fontFamily:"Arial",fontSize:16*je,color:"black",fontWeight:"bold",paddingHorizontal:75*je},button:{flexDirection:"column",marginLeft:75*je,width:"80%",height:"30%",backgroundColor:"#86A789",justifyContent:"center",alignItems:"center",left:"215%"},buttonText:{fontFamily:"Arial",color:"white",textAlign:"center",textAlignVertical:"center",fontSize:16*je},warntexts:{fontFamily:"Arial",fontSize:14*je,color:"red",marginLeft:75*je},bot:{width:70*je,height:70*je}}),Ce={intro:"Welcome to our research! You are invited to take part in a research study. Whether you take part is up to you.",reteam:"Principal Investigator: Dr. Yuhan Luo, Assistant Professor, City University of Hong Kong, Department of Computer Science;\nPrimary contact: Minhui Liang, Ph.D. Student, City University of Hong Kong, Department of Computer Science.",procedure:"In this survey, you will talk to a chatbot, which is designed to recommend personalized and healthy food for you. At the end of the conversation, you will be asked to decide whether you would like to take the recommend in the following week and a few questions about your conversation experience.\nThe survey consists of six parts: 1) filling out a short screening questionnaire to ensure that you meet the inclusion criteria; 2) providing your demographic and basic health information to prepare for the conversation; 3) customizing the chatbot (e.g., personality) according to your preference; 4) interacting with the chatbot to receive the recommendation; 5) providing your feedback with the recommending system; 6) You may receive a short follow-up survey in about one week after the study.\nOverall, the survey will take less than 15 minutes. Upon completion, you will receive 4 USD (~ 30 HKD or 3 GPB) to thank for your time.",risk:"The chatbot is powered by a large language model (LLM), which aims to recommend food by optimizing your eating preferences and health goals. While we have evaluated the recommendation results with professional nutritionists, the recommendation may not 100% fit your health profile. Therefore, the study is intended only for people *without* serious health concerns or food allergy.",bene:"1) You will have the opportunity to engage in a conversation with the latest large language model (LLM) and learn about their potentials.\n2) Through a short conversation with the chatbot, you will receive personalized food recommendations that could benefit your health.",confi:"All information gathered from this study will be kept confidential. Only the research team will have access to the data, and the raw data will be removed after the analysis is complete. Your privacy is of the utmost importance to us. Please note that you have the right to withdraw from this study at any time, particularly if you feel uncomfortable with the images presented."},ke=g.default.get("window").width,ve=g.default.get("window").height,Te=.65*Math.min(ke/320,ve/640);function ze(e){var t=e.navigation,n=.8*ke,o=.8*ve,l=.1*ve,r=(0,i.useState)(!1),a=(0,c.default)(r,2),s=a[0],u=a[1],f=(0,i.useState)(!1),g=(0,c.default)(f,2),m=g[0],x=g[1],b=(0,i.useState)(!1),p=(0,c.default)(b,2),j=p[0],w=p[1],S=(0,i.useState)("gray"),C=(0,c.default)(S,2),k=C[0],v=C[1],T=F(),z=(T.starttime,T.setStarttime);return(0,i.useEffect)((function(){v(1==s?"#86A789":"gray")}),[s]),(0,i.useEffect)((function(){var e=new Date;z(e)}),[]),(0,W.jsxs)(d.default,{style:Ae.container,children:[(0,W.jsx)(d.default,{style:[Ae.titleContainer,{height:l}],children:(0,W.jsx)(h.default,{style:Ae.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,W.jsxs)(d.default,{style:{height:o,backgroundColor:"white",paddingHorizontal:10*Te,borderRadius:15*Te,width:n,borderWidth:2*Te,borderColor:"black",flexDirection:"column",justifyContent:"flex-start",alignSelf:"center"},children:[(0,W.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:"Introduction"}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Te,color:"black",paddingHorizontal:75*Te},children:Ce.intro}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:"Research Team"}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Te,color:"black",paddingHorizontal:75*Te},children:Ce.reteam}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:"Study Procedure"}),(0,W.jsxs)(h.default,{style:{fontFamily:"Arial",fontSize:16*Te,color:"black",paddingHorizontal:75*Te},children:["In this survey, you will talk to a chatbot, which is designed to recommend personalized and healthy food for you. At the end of the conversation, you will be asked to decide whether you would like to take the recommendation in the following week and a few questions about your conversation experience.\nThe survey consists of five parts: 1) filling out a short screening questionnaire to ensure that you meet the inclusion criteria; 2) providing your demographic and basic health information to prepare for the conversation; 3) interacting with the chatbot to receive the recommendation; 4) providing your feedback with the recommending system;",(0,W.jsx)(h.default,{style:{color:"#597E52",fontWeight:"bold"},children:" 5) You may receive a short follow-up survey in about one week after the study."}),"\nOverall, the survey will take less than 15 minutes. Upon completion, you will receive a compensation equivalent to 2.8 USD (~ GBP 2.25, or HKD 22) to thank for your time."]}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:"Potential Risk"}),(0,W.jsxs)(h.default,{style:{fontFamily:"Arial",fontSize:16*Te,color:"black",paddingHorizontal:75*Te},children:["The chatbot is powered by a large language model (LLM), which aims to recommend food by optimizing your eating preferences and health goals. While we have evaluated the recommendation results with professional nutritionists, the recommendation may not 100% fit your health profile. Therefore, the study is intended only for people ",(0,W.jsx)(h.default,{style:{color:"#597E52",fontWeight:"bold"},children:"without"})," serious health concerns or food allergy."]}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:"Benefits"}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Te,color:"black",paddingHorizontal:75*Te},children:Ce.bene}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:"Confidentiality"}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Te,color:"black",paddingHorizontal:75*Te},children:Ce.confi}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,W.jsx)(h.default,{style:Ae.question,children:"Do you consent to participate in the study?"}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:s,onChange:function(e){u(e.target.checked),x(!1)},style:Ae.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Te,color:"black"},children:"Yes, I consent."})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:m,onChange:function(e){x(e.target.checked),u(!1)},style:Ae.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Te,color:"black"},children:"No, I do not consent."})]}),(0,W.jsx)(h.default,{style:Ae.subTitle,children:" "})]}),(0,W.jsx)(d.default,{style:[Ae.subTitleContainer,{height:l}],children:(0,W.jsx)(y.default,{style:[{marginRight:.1*ke,width:.145*ke,height:.03*ve,backgroundColor:k,justifyContent:"center",alignItems:"center"},j&&{backgroundColor:"#597E52"}],onFocus:function(){w(!0)},onBlur:function(){w(!1)},onPress:function(){s&&t.navigate("SmartEats-ScreeningQuestion")},children:(0,W.jsx)(h.default,{style:Ae.texts,children:"Next: Screening Questions"})})}),(0,W.jsx)(K.default,{style:"auto"})]})}var Ae=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"white",alignSelf:"center"},subTitleContainer:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainer:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},eleContainerPlus:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},eleContainerSub:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},title:{fontFamily:"Arial",fontSize:40*Te,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:20*Te,color:"black",fontWeight:"bold",marginLeft:75*Te},question:{fontFamily:"Arial",fontSize:20*Te,color:"#597E52",fontWeight:"bold",marginLeft:75*Te},texts:{fontFamily:"Arial",fontSize:16*Te,color:"white"},checkbox:{marginLeft:75*Te,height:16*Te,width:16*Te},bot:{marginBottom:20*Te,marginLeft:15*Te,width:65*Te,height:65*Te}}),Ie={prefix:"Before proceeding to the survey, we need to make sure that you meet the inclusion criteria by asking the following questions.",first:"1. Are you over 18?",second:"2. What is your English fluency in reading and writing?",third:"3. Are you interested in using an AI chatbot for food recommendation?",fourth:"4. Are you currently dealing with any severe health conditions that require you to be extremely cautious about your diet (e.g., Coronary heart disease, diabetic ketoacidosis (DKA), renal failure)?",fifth:"1. What is your biological sex?",sixth:"2. How old are you?",seventh:"3. What is your height (cm)?",eighth:"4. What is your weight (kg)?",ninth:"5. Which country/region do you currently live in?",tenth:"6. Do you have any dietary restrictions (e.g., vegetarianism)? You may skip this question if it does not apply to you.",eleventh:"7. Are there any specific aspects of your health that you would like to improve (e.g., energy level, physical fitness, sleep quality, immunity)?\nPlease leave the input box blank if you do not have any aspects to improve.",twelfth:"How do you want us to address you?",thirteenth:"Your email address:",cus:"Customize the chatbot before proceeding to the conversation."},De=g.default.get("window").width,Pe=g.default.get("window").height,Fe=.65*Math.min(De/320,Pe/640);function Ee(e){var t=e.navigation,n=.8*De,o=(0,i.useState)(!1),l=(0,c.default)(o,2),r=l[0],a=l[1],s=(0,i.useState)(!1),u=(0,c.default)(s,2),f=u[0],g=u[1],m=(0,i.useState)(!1),x=(0,c.default)(m,2),b=x[0],p=x[1],j=(0,i.useState)(!1),w=(0,c.default)(j,2),S=w[0],C=w[1],k=(0,i.useState)(!1),v=(0,c.default)(k,2),T=v[0],z=v[1],A=(0,i.useState)(!1),I=(0,c.default)(A,2),D=I[0],P=I[1],F=(0,i.useState)(!1),E=(0,c.default)(F,2),q=E[0],O=E[1],R=(0,i.useState)(!1),M=(0,c.default)(R,2),L=M[0],B=M[1],H=(0,i.useState)(!1),N=(0,c.default)(H,2),_=N[0],Q=N[1],U=(0,i.useState)(!1),G=(0,c.default)(U,2),Y=G[0],J=G[1],Z=(0,i.useState)(!1),$=(0,c.default)(Z,2),X=$[0],te=$[1],ne=(0,i.useState)(""),oe=(0,c.default)(ne,2),ie=oe[0],le=oe[1],re=(0,i.useState)("gray"),ae=(0,c.default)(re,2),se=ae[0],ce=ae[1];return(0,i.useEffect)((function(){1!=r||1!=T&&1!=D||1!=q||1!=Y?ce("gray"):(ce("#86A789"),le(""))}),[r,T,D,q,Y]),(0,W.jsxs)(V.default,{contentContainerStyle:We.container,children:[(0,W.jsx)(d.default,{style:We.titleContainer,children:(0,W.jsx)(h.default,{style:We.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,W.jsxs)(V.default,{contentContainerStyle:{flex:9,backgroundColor:"white",paddingHorizontal:10*Fe,borderRadius:15*Fe,width:n,borderWidth:2*Fe,borderColor:"black",flexDirection:"column",justifyContent:"center",alignSelf:"center"},children:[(0,W.jsx)(d.default,{style:We.subTitleContainer,children:(0,W.jsx)(h.default,{style:We.subTitle,children:Ie.prefix})}),(0,W.jsxs)(d.default,{style:We.eleContainer,children:[(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black",fontWeight:"bold",paddingHorizontal:75*Fe},children:Ie.first}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:r,onChange:function(e){a(e.target.checked),g(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Yes"})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:f,onChange:function(e){g(e.target.checked),a(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"No"})]})]}),(0,W.jsxs)(d.default,{style:We.eleContainerPlus,children:[(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black",fontWeight:"bold",paddingHorizontal:75*Fe},children:Ie.second}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:b,onChange:function(e){p(e.target.checked),C(!1),z(!1),P(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Not fluent at all"})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:S,onChange:function(e){C(e.target.checked),p(!1),z(!1),P(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"A little bit"})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:T,onChange:function(e){z(e.target.checked),p(!1),C(!1),P(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Fluent"})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:D,onChange:function(e){P(e.target.checked),p(!1),C(!1),z(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"I am a native speaker"})]})]}),(0,W.jsxs)(d.default,{style:We.eleContainer,children:[(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black",fontWeight:"bold",paddingHorizontal:75*Fe},children:Ie.third}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:q,onChange:function(e){O(e.target.checked),B(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Yes"})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:L,onChange:function(e){B(e.target.checked),O(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"No"})]})]}),(0,W.jsxs)(d.default,{style:We.eleContainer,children:[(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black",fontWeight:"bold",paddingHorizontal:75*Fe},children:Ie.fourth}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:_,onChange:function(e){Q(e.target.checked),J(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Yes"})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{type:"radio",checked:Y,onChange:function(e){J(e.target.checked),Q(!1)},style:We.checkbox}),(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"No"})]})]}),(0,W.jsx)(d.default,{style:We.eleContainerSub,children:(0,W.jsx)(h.default,{style:We.warntexts,children:ie})})]}),(0,W.jsx)(d.default,{style:We.bottomContainer,children:(0,W.jsx)(y.default,{style:[{marginRight:.1*De,width:.105*De,height:.03*Pe,backgroundColor:se,justifyContent:"center",alignItems:"center"},X&&{backgroundColor:"#597E52"}],onFocus:function(){te(!0)},onBlur:function(){te(!1)},onPress:function(){1!=r||1!=T&&1!=D||1!=q||1!=Y?0==r&&0==f||0==b&&0==S&&0==T&&0==D||0==q&&0==L||0==_&&0==Y?le(ee.notfinish):1!=f&&1!=b&&1!=S&&1!=L&&1!=_||le(ee.notqali):(le(""),t.navigate("SmartEats-UserProfile"))},children:(0,W.jsx)(h.default,{style:We.texts,children:"Next: User Profile"})})}),(0,W.jsx)(K.default,{style:"auto"})]})}var We=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flex:.5,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"white",alignSelf:"center"},subTitleContainer:{flex:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},bottomContainer:{flex:.5,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainerSub:{flex:.3,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},eleContainer:{flex:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},eleContainerPlus:{flex:1.4,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},title:{fontFamily:"Arial",fontSize:40*Fe,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:18*Fe,color:"#597E52",fontWeight:"bold",marginLeft:75*Fe},texts:{fontFamily:"Arial",fontSize:16*Fe,color:"white",textAlign:"center"},warntexts:{fontFamily:"Arial",fontSize:14*Fe,color:"red",marginLeft:75*Fe},checkbox:{marginLeft:75*Fe,height:16*Fe,width:16*Fe},bot:{marginBottom:20*Fe,marginLeft:15*Fe,width:65*Fe,height:65*Fe}});n(1021);const qe=function(e){return Math.floor(4*Math.random()).toString(),new Promise((function(t,n){var o={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({email:e})};fetch("https://www.foodcrs.com/home",o).then((function(e){return e.json()})).then((function(e){return t(e.status)})).catch((function(e){return n(e)}))}))};var Oe=g.default.get("window").width,Re=g.default.get("window").height,Me=.65*Math.min(Oe/320,Re/640);function Le(e){var t=e.navigation,n=.8*Oe,o=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,l=(0,i.useState)(""),r=(0,c.default)(l,2),a=r[0],u=r[1],f=(0,i.useState)(""),g=(0,c.default)(f,2),m=g[0],x=g[1],b=(0,i.useState)(""),p=(0,c.default)(b,2),j=p[0],w=p[1],S=(0,i.useState)(!1),C=(0,c.default)(S,2),k=C[0],v=C[1],T=(0,i.useState)(!1),z=(0,c.default)(T,2),A=z[0],I=z[1],D=(0,i.useState)("gray"),P=(0,c.default)(D,2),E=P[0],q=P[1],O=F(),R=(O.userId,O.setUserId);return(0,i.useEffect)((function(){""!=a&&""!=m?(q("#86A789"),w("")):q("gray")}),[a,m]),(0,W.jsxs)(V.default,{contentContainerStyle:Be.container,children:[(0,W.jsx)(d.default,{style:Be.titleContainer,children:(0,W.jsx)(h.default,{style:Be.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,W.jsxs)(V.default,{contentContainerStyle:{flex:9,backgroundColor:"white",paddingHorizontal:10*Me,borderRadius:15*Me,width:n,borderWidth:2*Me,borderColor:"black",flexDirection:"column",justifyContent:"center",alignSelf:"center"},children:[(0,W.jsxs)(d.default,{style:Be.eleContainer,children:[(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Me,color:"black",fontWeight:"bold",paddingHorizontal:75*Me},children:"How do you want us to address you?"}),(0,W.jsxs)("div",{className:"input-line",children:[(0,W.jsx)("input",{type:"text",value:a,onChange:function(e){u(e.target.value)},placeholder:"Please enter your name.",style:Be.input}),(0,W.jsx)(d.default,{style:Be.line})]})]}),(0,W.jsxs)(d.default,{style:Be.eleContainer,children:[(0,W.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Me,color:"black",fontWeight:"bold",paddingHorizontal:75*Me},children:"Your email address:"}),(0,W.jsxs)("div",{className:"input-line",children:[(0,W.jsx)("input",{type:"text",value:m,onChange:function(e){x(e.target.value)},placeholder:"Please enter your email.",style:Be.input}),(0,W.jsx)(d.default,{style:Be.line})]})]}),(0,W.jsx)(d.default,{style:Be.eleContainerSub,children:(0,W.jsx)(h.default,{style:Be.warntexts,children:j})})]}),(0,W.jsx)(d.default,{style:Be.bottomContainer,children:(0,W.jsx)(y.default,{style:[{marginRight:.1*Oe,width:.105*Oe,height:.03*Re,backgroundColor:E,justifyContent:"center",alignItems:"center"},A&&{backgroundColor:"#597E52"}],onFocus:function(){I(!0)},onBlur:function(){I(!1)},onPress:(0,s.default)((function*(){if(""!=a&&""!=m)if(o.test(m)){v(!0),w(""),console.log("here"),R(m);var e=yield qe(m);console.log("status",e),t.navigate("SmartEats-Chat")}else w(ee.email);else w(""==a?ee.name:""==m?ee.email:ee.notfinish)})),disabled:k,children:(0,W.jsx)(h.default,{style:Be.texts,children:"Next: Let's talk"})})}),(0,W.jsx)(K.default,{style:"auto"})]})}var Be=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flex:.5,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"white",alignSelf:"center"},subTitleContainer:{flex:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},bottomContainer:{flex:.5,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainerSub:{flex:.5,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},eleContainer:{flex:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},eleContainerMid:{flex:1.5,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},eleContainerPlus:{flex:2,flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},title:{fontFamily:"Arial",fontSize:40*Me,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:18*Me,color:"#DE8F5F",fontWeight:"bold",marginLeft:75},texts:{fontFamily:"Arial",fontSize:16*Me,color:"white",textAlign:"center"},warntexts:{fontFamily:"Arial",fontSize:14*Me,color:"red",marginLeft:75*Me},checkbox:{marginLeft:75*Me,height:16*Me,width:16*Me},input:{fontSize:16*Me,padding:0,border:"none",width:"180%",height:"120%",marginLeft:75*Me,borderBottomWidth:2*Me},line:{width:"180%",height:1*Me,backgroundColor:"black",marginLeft:75*Me,borderWidth:1*Me},bot:{marginBottom:20*Me,marginLeft:15*Me,width:65*Me,height:65*Me}});const He=function(e,t,n){return Math.floor(4*Math.random()).toString(),new Promise((function(o,i){var l={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({uid:e,proid:t,surveytime:n})};fetch("https://www.foodcrs.com/proid",l).then((function(e){return e.json()})).then((function(e){return o(e.status)})).catch((function(e){return i(e)}))}))};var Ne=g.default.get("window").width,_e=g.default.get("window").height,Qe=.65*Math.min(Ne/320,_e/640);function Ue(){var e=.8*Ne,t=(0,i.useState)(""),n=(0,c.default)(t,2),o=n[0],l=n[1],r=(0,i.useState)(!1),a=(0,c.default)(r,2),u=a[0],f=a[1],g=(0,i.useState)("gray"),m=(0,c.default)(g,2),x=m[0],b=m[1],p=(0,i.useState)("Finish the survey"),j=(0,c.default)(p,2),w=j[0],S=j[1],C=(0,i.useState)(""),k=(0,c.default)(C,2),v=k[0],T=k[1],z=(0,i.useState)(!1),A=(0,c.default)(z,2),I=A[0],D=A[1],P=(0,i.useState)(null),E=(0,c.default)(P,2),q=E[0],O=E[1],R=F().userId,M=F().starttime;return(0,i.useEffect)((function(){b(""!=o?"#86A789":"gray")}),[o]),(0,i.useEffect)((function(){var e=(new Date-M)/1e3;console.log("surveytime: ",e),O(e)}),[]),(0,W.jsxs)(d.default,{style:Ge.container,children:[(0,W.jsx)(d.default,{style:Ge.titleContainer,children:(0,W.jsx)(h.default,{style:Ge.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,W.jsxs)(d.default,{style:{flex:9,width:e,backgroundColor:"white",paddingHorizontal:10*Qe,borderRadius:15*Qe,borderWidth:2*Qe,borderColor:"black",flexDirection:"column",justifyContent:"center",alignItems:"center",alignSelf:"center"},children:[(0,W.jsx)(d.default,{style:Ge.eleContainerPlus,children:(0,W.jsx)(h.default,{style:Ge.subTitle,children:"Thank you for participating in our study! \ud83c\udf89\nWe will follow up with a short survey checking your diet in one week. \ud83d\udc96"})}),(0,W.jsx)(d.default,{style:Ge.eleContainerSub,children:(0,W.jsx)(h.default,{style:Ge.subTitle,children:" "})}),(0,W.jsxs)(d.default,{style:Ge.eleContainer,children:[(0,W.jsx)(h.default,{style:Ge.question,children:"Please enter your prolific ID or FPS (for Hong Kong participants only): "}),(0,W.jsx)(h.default,{style:Ge.promptTexts,children:"(make sure you click \u201cFinish the survey\u201d button before leaving):"}),(0,W.jsxs)("div",{className:"input-line",children:[(0,W.jsx)("input",{type:"text",value:o,onChange:function(e){T(""),l(e.target.value)},placeholder:"Please enter your prolific ID or FPS here",style:Ge.input}),(0,W.jsx)(d.default,{style:Ge.line})]}),(0,W.jsx)(h.default,{style:Ge.code,children:" "}),(0,W.jsx)(h.default,{style:Ge.code,children:" "}),(0,W.jsx)(h.default,{style:Ge.code,children:" "}),(0,W.jsx)(h.default,{style:Ge.code,children:"Your completion code: C2FX1FPE"})]}),(0,W.jsx)(d.default,{style:Ge.eleContainerSub,children:(0,W.jsx)(h.default,{style:Ge.warnText,children:v})})]}),(0,W.jsx)(d.default,{style:Ge.subTitleContainer,children:(0,W.jsx)(y.default,{style:[{width:.1*Ne,height:.03*_e,backgroundColor:x,justifyContent:"center",alignItems:"center",marginRight:.1*Ne},u&&{backgroundColor:"#597E52"}],onFocus:function(){f(!0)},onBlur:function(){f(!1)},onPress:(0,s.default)((function*(){if(""!=o){D(!0),T("");var e=yield He(R,o,q);console.log("status",e),S("Submitted \ud83c\udf8a")}else T("Please enter your prolific ID")})),disabled:I,children:(0,W.jsx)(h.default,{style:Ge.texts,children:w})})}),(0,W.jsx)(K.default,{style:"auto"})]})}var Ge=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flex:1,flexDirection:"row",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"white"},subTitleContainer:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainer:{flex:1.5,backgroundColor:"white"},eleContainerPlus:{flex:1.8,flexDirection:"column",justifyContent:"flex-end",backgroundColor:"white"},eleContainerSub:{flex:.5,backgroundColor:"white"},title:{fontFamily:"Arial",fontSize:40*Qe,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:30*Qe,color:"black",fontWeight:"bold"},question:{fontFamily:"Arial",fontSize:18*Qe,color:"#597E52",fontWeight:"bold",marginLeft:30*Qe,marginBottom:10*Qe},texts:{fontFamily:"Arial",fontSize:16*Qe,color:"white"},code:{fontFamily:"Arial",fontSize:16*Qe,fontWeight:"bold",color:"black",marginLeft:30*Qe},promptTexts:{fontFamily:"Arial",fontSize:15*Qe,color:"black",marginLeft:30*Qe,marginBottom:10*Qe},bot:{marginBottom:20*Qe,marginLeft:15*Qe,width:65*Qe,height:65*Qe},input:{fontSize:16*Qe,border:"none",width:"63%",height:"100%",marginLeft:30*Qe,outlineWidth:"none"},line:{width:"63%",height:1*Qe,backgroundColor:"black",marginLeft:30*Qe,borderWidth:1*Qe},warnText:{fontFamily:"Arial",fontSize:14*Qe,color:"red"}}),Ye=g.default.get("window").width,Ke=g.default.get("window").height,Ve=.65*Math.min(Ye/320,Ke/640);function Je(e){var t=e.navigation,n=.8*Ye,o=(0,i.useState)(""),l=(0,c.default)(o,2),r=l[0],a=l[1],u=(0,i.useState)(""),f=(0,c.default)(u,2),g=f[0],m=f[1],x=(0,i.useState)(!1),b=(0,c.default)(x,2),p=b[0],j=b[1],w=(0,i.useState)("gray"),S=(0,c.default)(w,2),C=S[0],k=S[1],v=(0,i.useState)("Next: Introduction"),T=(0,c.default)(v,2),z=T[0],A=(T[1],(0,i.useState)("")),I=(0,c.default)(A,2),D=I[0],P=I[1],F=(0,i.useState)(!1),E=(0,c.default)(F,2),q=E[0],O=E[1],R="tester",M=/^DTSGX[abcdefghijklmnopqrstuvwxyz]$/;function L(e){return M.test(e)}return(0,i.useEffect)((function(){r==R&&L(g)?k("#86A789"):k("gray")}),[r,g]),(0,W.jsxs)(d.default,{style:Ze.container,children:[(0,W.jsx)(d.default,{style:Ze.titleContainer,children:(0,W.jsx)(h.default,{style:Ze.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,W.jsxs)(d.default,{style:{flex:9,width:n,backgroundColor:"white",paddingHorizontal:10*Ve,borderRadius:15*Ve,borderWidth:2*Ve,borderColor:"black",flexDirection:"column",justifyContent:"center",alignItems:"center",alignSelf:"center"},children:[(0,W.jsxs)(d.default,{style:Ze.eleContainer,children:[(0,W.jsx)(h.default,{style:Ze.question,children:"Please enter your ID: "}),(0,W.jsxs)("div",{className:"input-line",children:[(0,W.jsx)("input",{type:"text",value:r,onChange:function(e){P(""),a(e.target.value)},placeholder:"Please enter your ID here",style:Ze.input}),(0,W.jsx)(d.default,{style:Ze.line})]}),(0,W.jsx)(h.default,{style:{fontSize:20*Ve,color:"white"},children:" "}),(0,W.jsx)(h.default,{style:{fontSize:20*Ve,color:"white"},children:" "}),(0,W.jsx)(h.default,{style:Ze.question,children:"Please enter your password: "}),(0,W.jsxs)("div",{className:"input-line",children:[(0,W.jsx)("input",{type:"text",value:g,onChange:function(e){P(""),m(e.target.value)},placeholder:"Please enter your password here",style:Ze.input}),(0,W.jsx)(d.default,{style:Ze.line})]}),(0,W.jsx)(h.default,{style:{fontSize:20*Ve,color:"white"},children:" "}),(0,W.jsx)(h.default,{style:{fontSize:20*Ve,color:"white"},children:" "}),(0,W.jsxs)(h.default,{style:{fontFamily:"Arial",fontSize:18*Ve},children:["For better readability of the webpage, please make sure your browser is in its ",(0,W.jsx)(h.default,{style:{fontWeight:"bold"},children:"maximal"})," width."]})]}),(0,W.jsx)(d.default,{style:Ze.eleContainerSub,children:(0,W.jsx)(h.default,{style:Ze.warnText,children:D})})]}),(0,W.jsx)(d.default,{style:Ze.subTitleContainer,children:(0,W.jsx)(y.default,{style:[{width:.105*Ye,height:.03*Ke,backgroundColor:C,justifyContent:"center",alignItems:"center",marginRight:.1*Ye},p&&{backgroundColor:"#597E52"}],onFocus:function(){j(!0)},onBlur:function(){j(!1)},onPress:(0,s.default)((function*(){r==R&&L(g)?(O(!0),P(""),t.navigate("SmartEats-Introduction")):P("Incorrect user name or password.")})),disabled:q,children:(0,W.jsx)(h.default,{style:Ze.texts,children:z})})}),(0,W.jsx)(K.default,{style:"auto"})]})}var Ze=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flex:1,flexDirection:"row",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"white"},subTitleContainer:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainer:{flex:3,flexDirection:"column",backgroundColor:"white",justifyContent:"center",alignItems:"flex-start",marginTop:50*Ve},eleContainerSub:{flex:.5,flexDirection:"column",backgroundColor:"white",justifyContent:"center",alignItems:"center"},title:{fontFamily:"Arial",fontSize:40*Ve,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:30*Ve,color:"black",fontWeight:"bold"},question:{fontFamily:"Arial",fontSize:18*Ve,color:"#597E52",fontWeight:"bold",marginBottom:10*Ve},texts:{fontFamily:"Arial",fontSize:16*Ve,color:"white"},promptTexts:{fontFamily:"Arial",fontSize:15*Ve,color:"black",marginLeft:112*Ve,marginBottom:10*Ve},bot:{marginBottom:20*Ve,marginLeft:15*Ve,width:65*Ve,height:65*Ve},input:{fontSize:16*Ve,border:"none",width:"150%",height:"100%",outlineWidth:"none"},line:{width:"150%",height:1*Ve,backgroundColor:"black",borderWidth:1*Ve},warnText:{fontFamily:"Arial",fontSize:14*Ve,color:"red"}}),$e=g.default.get("window").width,Xe=g.default.get("window").height,et=.65*Math.min($e/320,Xe/640);u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{height:.1*Xe,flexDirection:"row",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"white"},subTitleContainer:{height:.1*Xe,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},title:{fontFamily:"Arial",fontSize:40*et,color:"#597E52",fontWeight:"bold"},texts:{fontFamily:"Arial",fontSize:16*et,color:"white"},avatar:{backgroundColor:"white",paddingHorizontal:10*et,flexDirection:"row",justifyContent:"center",alignItems:"center"},sigAva:{backgroundColor:"white",paddingHorizontal:10*et,flexDirection:"column",justifyContent:"center",alignItems:"center"},textsub:{fontFamily:"Arial",fontSize:18*et,color:"black"},textbBold:{fontFamily:"Arial",fontSize:18*et,color:"black",fontWeight:"bold"},bot:{width:75*et,height:75*et}});var tt=(0,r.default)();(0,o.default)((function(){return(0,W.jsx)(l.default,{children:(0,W.jsxs)(tt.Navigator,{screenOptions:{headerShown:!1},children:[(0,W.jsx)(tt.Screen,{name:"SmartEats-Feedback",component:we}),(0,W.jsx)(tt.Screen,{name:"SmartEats-login",component:Je}),(0,W.jsx)(tt.Screen,{name:"SmartEats-Introduction",component:ze}),(0,W.jsx)(tt.Screen,{name:"SmartEats-ScreeningQuestion",component:Ee}),(0,W.jsx)(tt.Screen,{name:"SmartEats-UserProfile",component:Le}),(0,W.jsx)(tt.Screen,{name:"SmartEats-Chat",component:Y}),(0,W.jsx)(tt.Screen,{name:"SmartEats-Finish",component:Ue})]})})}))},1983:(e,t,n)=>{e.exports=n.p+"static/media/congrats.b5a90506df7dad69794b.png"},3361:(e,t,n)=>{e.exports=n.p+"static/media/negative.0101b3d353c83e3d6dfe.png"},9298:(e,t,n)=>{e.exports=n.p+"static/media/neutral.c84c0e621dcfa7d154ea.png"},6724:(e,t,n)=>{e.exports=n.p+"static/media/positive.ccce4d1ffc7d446ef534.png"},4719:(e,t,n)=>{e.exports=n.p+"static/media/rec.4752a8a97a90070a6730.png"},94:(e,t,n)=>{e.exports=n.p+"static/media/sorry.cdc3dc5f4186225bf544.png"},5481:(e,t,n)=>{e.exports=n.p+"static/media/waiting.2a4415f55e0d6522f877.png"}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,(()=>{var e=[];n.O=(t,o,i,l)=>{if(!o){var r=1/0;for(d=0;d<e.length;d++){for(var[o,i,l]=e[d],a=!0,s=0;s<o.length;s++)(!1&l||r>=l)&&Object.keys(n.O).every((e=>n.O[e](o[s])))?o.splice(s--,1):(a=!1,l<r&&(r=l));if(a){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[o,i,l]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,i){if(1&i&&(o=this(o)),8&i)return o;if("object"===typeof o&&o){if(4&i&&o.__esModule)return o;if(16&i&&"function"===typeof o.then)return o}var l=Object.create(null);n.r(l);var r={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&o;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>r[e]=()=>o[e]));return r.default=()=>o,n.d(l,r),l}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/FoodRSWeb/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,l,[r,a,s]=o,c=0;if(r.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(s)var d=s(n)}for(t&&t(o);c<r.length;c++)l=r[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(d)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[45],(()=>n(8896)));o=n.O(o)})();