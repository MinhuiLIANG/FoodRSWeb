(()=>{"use strict";var e={3185:(e,t,n)=>{n.r(t);var o=n(7706),i=n(7294),l=n(5815),a=n(9564),r=n(4942),s=n(5861),c=n(885),d=n(9321),u=n(2025),f=n(8094),h=n(6876),y=n(2582),g=n(5891),m=n(170),x=n(6123),b=n(6065);const p=function(e){return Math.floor(4*Math.random()).toString(),new Promise((function(t,n){var o={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({uid:e})};fetch("https://www.foodcrs.com/icebreak",o).then((function(e){return e.json()})).then((function(e){return t(e.icebreak)})).catch((function(e){return n(e)}))}))};const j=function(e,t,n,o){return Math.floor(4*Math.random()).toString(),new Promise((function(i,l){var a={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({uid:e,user:t,control:n,choosefood:o})};fetch("https://www.foodcrs.com/back",a).then((function(e){return e.json()})).then((function(e){return i(e.chatbot)})).catch((function(e){return l(e)}))}))};var w="I prefer the first one.",S="I prefer the second one.",C="I am OK with either of them.",k="I like neither of them.",v="I am glad that the recommendation works! Hope you enjoy the meal when you try it out!",z="I am glad you like my recommendation! Enjoy your meal when you try it out!",T="It seems like my recommendation skill needs some improvement, but thank you for your feedback. This is the end of the conversation.",A="Searching finished! Here are two recommendations:",I="Scroll up to check the two recommendations. Would you like to try any of them in the following days?",D="I got a better idea! Here are my recommendations:",P="Please scroll up to check my recommendations. Now would you like to try any of them in the following days?";const F=(0,n(270).default)((function(e){return{userId:null,starttime:null,setUserId:function(t){return e({userId:t})},setStarttime:function(t){return e({starttime:t})}}})),W=n.p+"static/media/openai-svgrepo-com.04ad457f0e1c677f769f.svg";var E=n(5893);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=!1,L=!0,H=!1,R="none",B="none",N="",_=g.default.get("window").width,G=g.default.get("window").height,Y=.65*Math.min(_/320,G/640);var U=u.default.create({background:{flex:1,backgroundColor:"white",paddingHorizontal:10*Y,flexDirection:"column",alignItems:"center",overflow:"scroll"},textContainer:{position:"absolute",top:.9*G,height:.1*G,backgroundColor:"white",paddingHorizontal:10*Y,flexDirection:"row",alignItems:"center",zIndex:100},titleContainer:{position:"absolute",height:.1*G,backgroundColor:"white",paddingHorizontal:10*Y,flexDirection:"row",alignItems:"center",zIndex:100},buttonText:{fontFamily:"Arial",color:"white",textAlign:"center",textAlignVertical:"center",fontSize:16*Y},bubbleText:{left:{fontFamily:"Arial",fontSize:16*Y,color:"black"},right:{fontFamily:"Arial",fontSize:16*Y,color:"black"}},imgText:{fontFamily:"Arial",fontSize:16*Y,color:"black"},boldText:{fontFamily:"Arial",fontSize:16*Y,color:"white",fontWeight:"bold"},text:{fontFamily:"Arial",fontSize:16*Y,color:"black"},title:{fontFamily:"Arial",fontSize:40*Y,color:"#597E52",fontWeight:"bold"},button:{backgroundColor:"#86A789",alignItems:"center",height:"75%",width:"41%",borderRadius:8.5*Y,padding:10*Y,borderColor:"#86A789",margintop:20*Y},buttonsub:{backgroundColor:"#86A789",alignItems:"center",height:"75%",width:"33%",borderRadius:8.5*Y,padding:10*Y,borderColor:"#86A789",margintop:20*Y},buttonsubShort:{backgroundColor:"#86A789",alignItems:"center",height:"75%",width:"9%",borderRadius:8.5*Y,padding:10*Y,borderColor:"#86A789",margintop:20*Y},buttonsubMid:{backgroundColor:"#86A789",alignItems:"center",height:"75%",width:"11%",borderRadius:8.5*Y,padding:10*Y,borderColor:"#86A789",margintop:20*Y},buttonsubPress:{backgroundColor:"#597E52"},waiting:{left:{backgroundColor:"white",borderColor:"black",borderWidth:1.5*Y},right:{backgroundColor:"#D2E3C8"}},working:{left:{backgroundColor:"white",width:"65%",borderColor:"black",borderWidth:1.5*Y},right:{backgroundColor:"#D2E3C8",width:"65%"}},inputToolbarContainer:{borderTopWidth:1*Y,borderBottomWidth:1*Y,borderColor:"black",marginTop:37*Y},image:{width:500*Y,height:300*Y,marginRight:8*Y},sendButton:{justifyContent:"center",alignItems:"center",backgroundColor:"white",marginBottom:9*Y},sendButtonText:{color:"#597E52",fontSize:20*Y,fontWeight:"bold"},avatarContainer:{width:60*Y,height:60*Y},avatar:{flex:1,width:null,height:null,resizeMode:"contain"},bot:{marginBottom:20*Y,marginLeft:15*Y,width:65*Y,height:65*Y}});const K=function(e){var t=e.navigation,o=(0,i.useState)([]),l=(0,c.default)(o,2),a=l[0],r=l[1],u=(0,i.useState)(!1),g=(0,c.default)(u,2),q=g[0],K=g[1],V=(0,i.useState)(!1),J=(0,c.default)(V,2),Z=J[0],Q=J[1],$=(0,i.useState)(!1),X=(0,c.default)($,2),ee=X[0],te=X[1],ne=F().userId,oe=.7*_,ie={_id:1,name:"user"},le={_id:2,name:"chatbot",avatar:n(9298)},ae=[{_id:2,name:"chatbot",avatar:n(9298)},{_id:2,name:"chatbot",avatar:n(6724)},{_id:2,name:"chatbot",avatar:n(3361)},{_id:2,name:"chatbot",avatar:n(1983)},{_id:2,name:"chatbot",avatar:n(4719)},{_id:2,name:"chatbot",avatar:n(5481)},{_id:2,name:"chatbot",avatar:n(94)}],re=(0,i.useState)(!1),se=(0,c.default)(re,2),ce=se[0],de=se[1],ue=(0,i.useState)(!1),fe=(0,c.default)(ue,2),he=fe[0],ye=fe[1],ge=(0,i.useState)(!1),me=(0,c.default)(ge,2),xe=me[0],be=me[1],pe=(0,i.useState)(!1),je=(0,c.default)(pe,2),we=je[0],Se=je[1],Ce=(0,i.useState)(!1),ke=(0,c.default)(Ce,2),ve=ke[0],ze=ke[1],Te=(0,i.useState)(!1),Ae=(0,c.default)(Te,2),Ie=Ae[0],De=Ae[1],Pe=(0,i.useState)(!1),Fe=(0,c.default)(Pe,2),We=Fe[0],Ee=Fe[1],qe=(0,i.useState)(!1),Me=(0,c.default)(qe,2),Oe=Me[0],Le=Me[1],He=(0,i.useState)(!1),Re=(0,c.default)(He,2),Be=Re[0],Ne=Re[1];function _e(){return(_e=(0,s.default)((function*(){Ke("Typing",5);var e=yield p(ne);r([{_id:1,text:e,createdAt:new Date,user:le}]),Ze()}))).apply(this,arguments)}function Ge(e,t){var n=t.indexOf(e);return-1!==n?t.slice(0,n)+t.slice(n+e.length):t}function Ye(e,t,n){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,s.default)((function*(e,t,n){var o=yield j(ne,e,t,n);if((o.includes(v)||o.includes(z)||o.includes(T))&&(O=!0),-1!=o.indexOf("[REC]")){var i="",l="";0==H&&(i=A,l=I,O=!0),1==H&&(i=D,l=P,O=!0),Ze(),Ke(i,4);var a=o.split("[REC]"),r=a[0].split("[CAT]"),s=a[1].split("[CAT]"),c=r[0].split("[CLS]"),d=s[0].split("[CLS]"),u=c[0],f=c[1],h=d[0],y=d[1];R=u,B=h;Ge(u,f),Ge(h,y);Je(r[1],u+"\n"+f),Je(s[1],h+"\n"+y),Ke(l,4),H=!0}else{if(-1!=o.indexOf("[CAT]")){var g="",m="";0==w&&(g=A,m=I,O=!0),1==w&&(g=D,m=P,O=!0),Ze(),Ke(g,4);var x=o.split("[CAT]"),b=x[0].split("[CLS]"),p=b[0],w=b[1];R=p,B="loss[ERROR]"+w,Je(x[1],p+"\n"+w),Ke(m,4),w=!0}if(o.includes(v)||o.includes(z)||o.includes(T))(o.includes(v)||o.includes(z))&&(Ze(),Ke(o,3)),o.includes(T)&&(Ze(),Ke(o,6));else{console.log("index:**",0),Ze(),Ke(o,0)}}L=!1}))).apply(this,arguments)}function Ke(e,t){var n={_id:Math.round(1e6*Math.random()),text:e,createdAt:new Date,user:le};"none"!=t&&(n={_id:Math.round(1e6*Math.random()),text:e,createdAt:new Date,user:ae[t]}),N=e,r((function(e){return x.GiftedChat.append(e,n)}))}function Ve(e){var t={_id:Math.round(1e6*Math.random()),text:e,createdAt:new Date,user:ie};r((function(e){return x.GiftedChat.append(e,t)}))}function Je(e,t){var n={_id:Math.round(1e6*Math.random()),image:e,text:t,createdAt:new Date,user:ae[4]};r((function(e){return x.GiftedChat.append(e,n)}))}function Ze(){r((function(e){return e.filter((function(e){return"Typing"!==e.text&&"Got you. Searching for food... This process may take a while"!==e.text&&"I see. Trying to search for alternative options... This process may take a while"!==e.text}))}))}function Qe(e,t,n,o){if(e.startsWith(t)){var i=e.split("\n");return(0,E.jsxs)(h.default,{children:[(0,E.jsx)(h.default,{style:{fontWeight:o},children:t}),i.length>1&&(0,E.jsx)(h.default,{children:"\n"}),i.slice(1).map((function(e,t){return(0,E.jsxs)(h.default,{children:[t>0&&(0,E.jsx)(h.default,{children:"\n"}),e]},t)}))]})}if(e.startsWith(n)){var l=e.split("\n");return(0,E.jsxs)(h.default,{children:[(0,E.jsx)(h.default,{style:{fontWeight:o},children:n}),l.length>1&&(0,E.jsx)(h.default,{children:"\n"}),l.slice(1).map((function(e,t){return(0,E.jsxs)(h.default,{children:[t>0&&(0,E.jsx)(h.default,{children:"\n"}),e]},t)}))]})}return e}(0,i.useEffect)((function(){L=!0,function(){_e.apply(this,arguments)}(),L=!1}),[]);var $e=(0,i.useCallback)((function(e){var t=e[0],n=M(M({_id:Math.round(1e6*Math.random())},t),{},{createdAt:new Date,user:ie});r((function(e){return x.GiftedChat.append(e,n)})),console.log("control:",L);var o=n.text,i="none";0==L&&((o==w||o==S||C)&&(i="<left>"),o==k&&(i="<right>"),L=!0,N.includes("OK, do you have anything else to add before I recommend some food for you, such as flavor, cuisine?")||"Could you tell me why you don't like these foods? I'll try to refine the recommendation based on your input. Due to the token limitation, the next round will be the last-round of recommendations."==N?N.includes("OK, do you have anything else to add before I recommend some food for you, such as flavor, cuisine?")?Ke("Got you. Searching for food... This process may take a while",5):Ke("I see. Trying to search for alternative options... This process may take a while",5):Ke("Typing",5),Ye(o,i,"none"))}),[]),Xe=function(e){var t=e.currentMessage,n=e.imageProps,o=t.text,l=null;if(l="Typing"==o||"Got you. Searching for food... This process may take a while"==o||"I see. Trying to search for alternative options... This process may take a while"==o||o.length<97?U.waiting:U.working,o==A||o==D)return console.log("prefix"),(0,E.jsx)(d.default,{style:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",padding:8*Y,backgroundColor:"white",width:"38%",borderTopRightRadius:15*Y,borderBottomRightRadius:15*Y,borderTopLeftRadius:15*Y,borderColor:"black",borderWidth:1.5*Y,marginLeft:23*Y},children:(0,E.jsx)(h.default,{style:U.imgText,children:o})});if(t.image){var a=(0,i.useState)(!0),r=(0,c.default)(a,2),s=r[0],u=r[1];return(0,E.jsxs)(d.default,{style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:8*Y,backgroundColor:"white",width:"61%",borderTopRightRadius:15*Y,borderBottomRightRadius:15*Y,borderColor:"black",borderWidth:1.5*Y,marginLeft:23*Y},children:[s&&(0,E.jsxs)(d.default,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,E.jsx)(h.default,{style:U.imgText,children:"Loading the food image "}),(0,E.jsx)(f.default,{style:{justifyContent:"flex-start",marginLeft:5},size:"small",color:"#597E52"})]}),(0,E.jsx)(m.default,M({source:{uri:t.image},style:{width:_,height:.15*_,marginRight:8*Y},onLoad:function(){return u(!1)},resizeMode:"contain"},n)),(0,E.jsx)(h.default,{style:U.imgText,children:Qe(o,R,B,"bold")})]})}return(0,E.jsx)(x.Bubble,M(M({},e),{},{wrapperStyle:l,textStyle:U.bubbleText}))};return(0,E.jsx)(b.SafeAreaProvider,{children:(0,E.jsxs)(d.default,{style:U.background,children:[(0,E.jsx)(d.default,{style:U.titleContainer,children:(0,E.jsx)(h.default,{style:U.title,children:"Let's chat!"})}),(0,E.jsx)(d.default,{style:{position:"absolute",top:.1*G,height:.8*G,backgroundColor:"white",paddingHorizontal:10*Y,borderRadius:15*Y,borderColor:"black",borderWidth:2*Y,width:oe,zIndex:200},children:(0,E.jsx)(x.GiftedChat,{messages:a,onSend:function(e){return $e(e)},user:ie,renderBubble:function(e){return(0,E.jsx)(Xe,M({},e))},renderSend:function(e){return(0,E.jsx)(x.Send,M(M({},e),{},{children:(0,E.jsx)(d.default,{style:U.sendButton,children:(0,E.jsx)(h.default,{style:U.sendButtonText,children:"Send"})})}))},renderInputToolbar:function(e){if(1!=O)return(0,E.jsx)(d.default,{style:U.inputToolbarContainer,children:(0,E.jsx)(x.InputToolbar,M({},e))});console.log("end")},renderMessageText:function(e){var n=e.currentMessage.text;if("Typing"==n||"Got you. Searching for food... This process may take a while"==n||"I see. Trying to search for alternative options... This process may take a while"==n)return(0,E.jsxs)(d.default,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},children:[(0,E.jsx)(x.MessageText,M({},e)),(0,E.jsx)(f.default,{style:{justifyContent:"flex-start",marginLeft:-10*Y},size:"small",color:"#597E52"}),(0,E.jsx)(h.default,{children:"    "})]});if(n==I)return(0,E.jsxs)(d.default,{children:[(0,E.jsx)(x.MessageText,M({},e)),(0,E.jsxs)(d.default,{style:{flexDirection:"row",justifyContent:"center",marginTop:10*Y},children:[(0,E.jsx)(y.default,{style:[U.buttonsub,ce&&U.buttonsubPress],onPress:function(){de(!0),O=!1,K(!0),Ve(w),Ye(w,"<left>","First: "+R),Ke("Typing",5)},disabled:q,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"First Recommendation"})}),(0,E.jsx)(h.default,{style:U.buttonText,children:"    "}),(0,E.jsx)(y.default,{style:[U.buttonsub,he&&U.buttonsubPress],onPress:function(){ye(!0),O=!1,K(!0),Ve(S),Ye(S,"<left>","Second: "+B),Ke("Typing",5)},disabled:q,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"Second Recommendation"})}),(0,E.jsx)(h.default,{style:U.buttonText,children:"    "}),(0,E.jsx)(y.default,{style:[U.buttonsubShort,xe&&U.buttonsubPress],onPress:function(){be(!0),O=!1,K(!0),Ve(C),Ye(C,"<left>","Either: "+R+"[or]"+B),Ke("Typing",5)},disabled:q,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"Either"})}),(0,E.jsx)(h.default,{style:U.buttonText,children:"    "}),(0,E.jsx)(y.default,{style:[U.buttonsubMid,we&&U.buttonsubPress],onPress:function(){Se(!0),O=!1,K(!0),Ve(k),Ye(k,"<right>","none"),Ke("Typing",5)},disabled:q,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"Neither"})})]})]});if(n==P)return(0,E.jsxs)(d.default,{children:[(0,E.jsx)(x.MessageText,M({},e)),(0,E.jsxs)(d.default,{style:{flexDirection:"row",justifyContent:"center",marginTop:10*Y},children:[(0,E.jsx)(y.default,{style:[U.buttonsub,ve&&U.buttonsubPress],onPress:function(){ze(!0),O=!1,Q(!0),Ve(w),Ye(w,"none","First: "+R),Ke("Typing",5)},disabled:Z,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"First Recommendation"})}),(0,E.jsx)(h.default,{style:U.buttonText,children:"    "}),(0,E.jsx)(y.default,{style:[U.buttonsub,Ie&&U.buttonsubPress],onPress:function(){De(!0),O=!1,Q(!0),Ve(S),Ye(S,"none","Second: "+B),Ke("Typing",5)},disabled:Z,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"Second Recommendation"})}),(0,E.jsx)(h.default,{style:U.buttonText,children:"    "}),(0,E.jsx)(y.default,{style:[U.buttonsubShort,We&&U.buttonsubPress],onPress:function(){Ee(!0),O=!1,Q(!0),Ve(C),Ye(C,"none","Either: "+R+"[or]"+B),Ke("Typing",5)},disabled:Z,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"Either"})}),(0,E.jsx)(h.default,{style:U.buttonText,children:"    "}),(0,E.jsx)(y.default,{style:[U.buttonsubMid,Oe&&U.buttonsubPress],onPress:function(){Le(!0),O=!1,Q(!0),Ve(k),Ye(k,"none","none"),Ke("Typing",5)},disabled:Z,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"Neither"})})]})]});if(n.includes(v)||n.includes(z)||n.includes(T)){var o="Here are the dietary keywords for you",i=n.indexOf(o)+37+1;return n.includes(o)?(0,E.jsxs)(d.default,{children:[(0,E.jsxs)(h.default,{style:{fontFamily:"Arial",fontSize:16*Y,color:"black",padding:8*Y},children:[(0,E.jsx)(h.default,{children:n.substring(0,i)}),(0,E.jsx)(h.default,{style:{fontWeight:"bold"},children:n.substring(i)})]}),(0,E.jsx)(d.default,{style:{flexDirection:"row",justifyContent:"center",marginTop:10*Y},children:(0,E.jsx)(y.default,{style:[U.button,Be&&{backgroundColor:"#597E52"}],onPress:function(){Ne(!0),te(!0),t.navigate("SmartEats-Feedback")},disabled:ee,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"Next step: provide feedback"})})})]}):(0,E.jsxs)(d.default,{children:[(0,E.jsx)(x.MessageText,M({},e)),(0,E.jsx)(d.default,{style:{flexDirection:"row",justifyContent:"center",marginTop:10*Y},children:(0,E.jsx)(y.default,{style:[U.button,Be&&{backgroundColor:"#597E52"}],onPress:function(){Ne(!0),te(!0),t.navigate("SmartEats-Feedback")},disabled:ee,children:(0,E.jsx)(h.default,{style:U.buttonText,children:"Next step: provide feedback"})})})]})}return(0,E.jsx)(d.default,{children:(0,E.jsx)(x.MessageText,M({},e))})},renderAvatar:function(e){return(0,E.jsx)(d.default,{style:U.avatarContainer,children:(0,E.jsx)(m.default,{source:e.currentMessage.user.avatar,style:U.avatar})})},multiline:!0})}),(0,E.jsxs)(d.default,{style:U.textContainer,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:14*Y,color:"black",left:.08*_*Y},children:"Powered by "}),(0,E.jsx)(m.default,{source:W,style:{width:22*Y,height:22*Y,left:.08*_*Y}}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:14*Y,color:"black",left:.08*_*Y},children:" OpenAI GPT-4 API and DALL\xb7E3, the chatbot icons are designed by Sergey Stepanov / Alamy Stock Vector."})]})]})})};var V=n(5456),J=n(1494),Z=n(8138);const Q=function(e,t,n,o,i,l,a,r,s,c,d,u,f,h,y,g,m,x,b,p,j,w,S,C){return Math.floor(4*Math.random()).toString(),new Promise((function(k,v){var z={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({uid:e,acca:t,expa:n,expb:o,expc:i,intera:l,usefa:a,usefb:r,trusta:s,trustb:c,eata:d,useia:u,useib:f,useic:h,quaa:y,ada:g,adb:m,botstyle:x,edul:b,workf:p,race:j,hper:w,feedback:S,extra:C})};fetch("https://www.foodcrs.com/end",z).then((function(e){return e.json()})).then((function(e){return k(e.status)})).catch((function(e){return v(e)}))}))};var $={acca:"1. The foods that chatbot recommends to me matches my preferences and health conditions.",expa:"2. I am satisfied with the images of the recommended foods.",expb:"3. The text explanation of the food recommendations was sufficient for me to make a decision.",expc:"4. I understand why the foods were recommended to me.",intera:"5. I found it easy to inform the chatbot what I like or dislike.",usefa:"6. The chatbot gave me good dietary suggestions.",usefb:"7. Following the dietary suggestions from the chatbot is easy.",trusta:"8. I am convinced of what the chatbot recommends to me.",trustb:"9. The chatbot can be trusted.",eata:"10. I would like to eat the foods that the chatbot recommended in the following days.",extra:"11. I do not understand why chatbot recommended the foods to me.",useia:"12. I would like to use the chatbot for dietary recommendations again.",useib:"13. I would like to use the chatbot for dietary recommendations frequently if possible.",useic:"14. I would like to tell my friends about this chatbot for dietary recommendations.",quaa:"15. Overall, I am satisfied with the recommended foods",ada:"16. During the conversation, the chatbot is able to detect my intention and feelings, and responds appropriately, such as switching topics and changing expressions.",adb:"17. I enjoy the conversation with the chatbot.",cusa:"18. I found the customized chatbot (e.g., personality, conversational style, and additional characteristics) talk in a way I like.",cusb:"19. I found customizing the chatbot is easy and effortless.",cusc:"20. I found customizing the chatbot is interesting.",q1:"21. What is your highest level of education?",q2:"22. Which of the following best describes your focus of work?",q3:"23. Which race/ethnicity best describes you?",q4:"24. Which of the following words is closer to your personality?",q5:"25. Do you have any additional thoughts and feedback on this chatbot-based recommender system? (more than 5 words)",botstyle:"18. I found the chatbot talk in a way I like.",q1bl:"19. What is your highest level of education?",q2bl:"20. Which of the following best describes your focus of work?",q3bl:"21. Which race/ethnicity best describes you?",q4bl:"22. Which of the following words is closer to your personality?",q5bl:"23. Do you have any additional thoughts and feedback on this chatbot-based recommender system? (more than 5 words)"},X={prefix:"Before concluding the survey, please scroll down to answer all of the following questions so that we can make improvements to the system.",fb1:"1, What do you think of the overall recommendation quality?",fb2:"2, What do you think of the overall chatbot intelligence?",fb3:"3, What do you think of the overall chatting experience?",q1:"4, What is your highest level of education?",q2:"5, Which of the following best describes your focus of work?",q3:"6, Which race/ethnicity best describes you?"},ee={notfinish:"Please complete all the screening questions before proceeding to the survey.",notqali:"Sorry :( It looks like you do not meet the study criteria.",age:"Please enter a valid age (over 18 and below 120).",height:"Please enter a valid height (over 100cm and below 220cm).",weight:"Please enter a valid weight (over 30kg and below 150kg).",name:"Please enter your nickname.",email:"Please enter a valid email address.",gender:"Please select a valid biological sex.",country:"Please select a valid country name.",region:"Please select a valid region name.",rec:"Please rate and review the recommendation quality.",int:"Please rate and review the chatbot intelligence.",exp:"Please rate and review your interacting experience.",edu:"Please provide some information about your education level.",work:"Please provide some information about your focus of work.",ra:"Please provide some information about your ethnicity, if you do not want to tell us about this, please select 'Prefer not to say'.",cusp:"Please select the personality to customize the chatbot according to your preference.",cuss:"Please select the speaking style to customize the chatbot according to your preference.",cusiden:"Please select the identity to customize the chatbot according to your preference."},te=g.default.get("window").width,ne=g.default.get("window").height,oe=.65*Math.min(te/320,ne/640),ie=u.default.create({question:{fontFamily:"Arial",fontSize:16*oe,color:"black",fontWeight:"bold",paddingHorizontal:75*oe},checkbox:{marginLeft:75*oe,height:16*oe,width:16*oe},checkText:{fontFamily:"Arial",color:"black",fontSize:16*oe}});const le=function(e){var t=e.question,n=e.options,o=e.onChange,l=e.containerStyle,a=(0,i.useState)(null),r=(0,c.default)(a,2),s=r[0],u=r[1],f=function(e){u(e),o&&o(e)};return(0,E.jsxs)(d.default,{style:l,children:[(0,E.jsx)(h.default,{style:ie.question,children:t}),n.map((function(e,t){return(0,E.jsx)(d.default,{style:{flexDirection:"row",alignItems:"center"},children:(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:s===e,style:ie.checkbox,onChange:function(){return f(e)}}),(0,E.jsx)(h.default,{style:ie.checkText,children:e})]})},t)}))]})};var ae=g.default.get("window").width,re=g.default.get("window").height,se=.65*Math.min(ae/320,re/640),ce=u.default.create({question:{fontFamily:"Arial",fontSize:16*se,color:"black",fontWeight:"bold",paddingHorizontal:75*se},checkbox:{marginLeft:75*se,height:16*se,width:16*se},checkText:{fontFamily:"Arial",color:"black",fontSize:16*se}});const de=function(e){var t=e.question,n=e.options,o=e.onChange,l=(0,i.useState)(null),a=(0,c.default)(l,2),r=a[0],s=a[1],u=function(e){s(e),o&&o(e)};return(0,E.jsxs)(d.default,{children:[(0,E.jsx)(h.default,{style:ce.question,children:t}),n.map((function(e,t){return(0,E.jsx)(d.default,{style:{flexDirection:"row",alignItems:"center"},children:(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:r===e,style:ce.checkbox,onChange:function(){return u(e)}}),(0,E.jsx)(h.default,{style:ce.checkText,children:e})]})},t)}))]})};var ue=n(9219),fe=n.n(ue),he=g.default.get("window").width,ye=g.default.get("window").height,ge=.65*Math.min(he/320,ye/640),me=u.default.create({container:{flexDirection:"column",alignItems:"center",justifyContent:"center"},sliderContainer:{position:"absolute",zIndex:1,alignItems:"center",justifyContent:"center",width:500*ge,marginLeft:130*ge,marginTop:20*ge},circleContainer:{position:"absolute",zIndex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:500*ge,marginLeft:130*ge,marginTop:20*ge},question:{fontFamily:"Arial",fontSize:17*ge,color:"black",fontWeight:"bold",marginLeft:75*ge},slider:{width:"100%"},scaleMarksContainer:{position:"absolute",zIndex:1,flexDirection:"row",justifyContent:"center",width:500*ge,marginLeft:130*ge,marginTop:50*ge},scaleMarkText:{fontFamily:"Arial",color:"black",fontSize:14*ge},progressText:{fontFamily:"Arial",color:"black",fontSize:16*ge,fontWeight:"bold",marginTop:8*ge,marginLeft:75*ge},button:{backgroundColor:"#597E52",borderRadius:5*ge,marginTop:20*ge},buttonText:{color:"white",fontWeight:"bold",textAlign:"center"},thumbStyle:{width:15*ge,height:15*ge,borderRadius:7.5*ge},circle:{position:"absolute",width:15*ge,height:15*ge,borderRadius:7.5*ge,marginTop:15*ge}});const xe=function(e){var t=e.question,n=e.onChange,o=e.containerStyle,l=(0,i.useState)(3),a=(0,c.default)(l,2),r=a[0],s=a[1],u=(0,i.useState)("gray"),f=(0,c.default)(u,2),y=f[0],g=f[1],m=(0,i.useState)(!1),x=(0,c.default)(m,2),b=x[0],p=x[1],j=r>=0&&b?"#D2E3C8":"gray",w=r>=1&&b?"#D2E3C8":"gray",S=r>=2&&b?"#D2E3C8":"gray",C=r>=3&&b?"#D2E3C8":"gray",k=r>=4&&b?"#D2E3C8":"gray",v=r>=5&&b?"#D2E3C8":"gray",z=r>=6&&b?"#D2E3C8":"gray",T=function(e){switch(e){case 0:return"strongly disagree";case 1:return"disagree";case 2:return"slightly disagree";case 3:default:return"neutral";case 4:return"slightly agree";case 5:return"agree";case 6:return"strongly agree"}};return(0,E.jsxs)(d.default,{style:o,children:[(0,E.jsx)(d.default,{style:{flex:.2,flexDirection:"column"},children:(0,E.jsx)(h.default,{style:me.question,children:t})}),(0,E.jsxs)(d.default,{style:{flex:1,flexDirection:"column",marginTop:20*ge},children:[(0,E.jsxs)(d.default,{style:me.circleContainer,children:[(0,E.jsx)(d.default,{style:[me.circle,{left:"0%",backgroundColor:j}]}),(0,E.jsx)(d.default,{style:[me.circle,{left:"15.995%",backgroundColor:w}]}),(0,E.jsx)(d.default,{style:[me.circle,{left:"32.105%",backgroundColor:S}]}),(0,E.jsx)(d.default,{style:[me.circle,{left:"48.525%",backgroundColor:C}]}),(0,E.jsx)(d.default,{style:[me.circle,{left:"64.410%",backgroundColor:k}]}),(0,E.jsx)(d.default,{style:[me.circle,{left:"80.475%",backgroundColor:v}]}),(0,E.jsx)(d.default,{style:[me.circle,{left:"97.05%",backgroundColor:z}]})]}),(0,E.jsx)(d.default,{style:me.sliderContainer,children:(0,E.jsx)(fe(),{style:me.slider,minimumValue:0,maximumValue:6,step:1,value:r,onValueChange:function(e){s(e)},onSlidingComplete:function(e){p(!0),g("#597E52"),n(T(e))},minimumTrackTintColor:b?"#D2E3C8":"gray",maximumTrackTintColor:"gray",thumbTintColor:y,thumbStyle:me.thumbStyle})}),(0,E.jsxs)(d.default,{style:me.scaleMarksContainer,children:[(0,E.jsx)(h.default,{style:[me.scaleMarkText,{left:"-35%"}],children:"strongly disagree"}),(0,E.jsx)(h.default,{style:[me.scaleMarkText,,{left:"-1.5%"}],children:"neutral"}),(0,E.jsx)(h.default,{style:[me.scaleMarkText,{left:"33%"}],children:"strongly agree"})]})]}),(0,E.jsx)(d.default,{style:{marginTop:80*ge},children:(0,E.jsxs)(h.default,{style:me.progressText,children:["current choice: ",(0,E.jsx)(h.default,{style:{color:"#597E52"},children:b?T(r):""})]})})]})};var be=g.default.get("window").width,pe=g.default.get("window").height,je=.65*Math.min(be/320,pe/640);function we(e){var t=e.navigation,n=.8*be,o=.8*pe,l=.1*pe,a=(0,i.useState)(""),r=(0,c.default)(a,2),u=r[0],f=r[1],g=(0,i.useState)(""),m=(0,c.default)(g,2),x=m[0],b=m[1],p=(0,i.useState)(""),j=(0,c.default)(p,2),w=j[0],S=j[1],C=(0,i.useState)(""),k=(0,c.default)(C,2),v=k[0],z=k[1],T=(0,i.useState)(""),A=(0,c.default)(T,2),I=A[0],D=A[1],P=(0,i.useState)(""),W=(0,c.default)(P,2),q=W[0],M=W[1],O=(0,i.useState)(""),L=(0,c.default)(O,2),H=L[0],R=L[1],B=(0,i.useState)(""),N=(0,c.default)(B,2),_=N[0],G=N[1],Y=(0,i.useState)(""),U=(0,c.default)(Y,2),K=U[0],te=U[1],ne=(0,i.useState)(""),oe=(0,c.default)(ne,2),ie=oe[0],ae=oe[1],re=(0,i.useState)(""),se=(0,c.default)(re,2),ce=se[0],ue=se[1],fe=(0,i.useState)(""),he=(0,c.default)(fe,2),ye=he[0],ge=he[1],me=(0,i.useState)(""),we=(0,c.default)(me,2),Ce=we[0],ke=we[1],ve=(0,i.useState)(""),ze=(0,c.default)(ve,2),Te=ze[0],Ae=ze[1],Ie=(0,i.useState)(""),De=(0,c.default)(Ie,2),Pe=De[0],Fe=De[1],We=(0,i.useState)(""),Ee=(0,c.default)(We,2),qe=Ee[0],Me=Ee[1],Oe=(0,i.useState)(""),Le=(0,c.default)(Oe,2),He=Le[0],Re=Le[1],Be=(0,i.useState)(""),Ne=(0,c.default)(Be,2),_e=Ne[0],Ge=Ne[1],Ye=(0,i.useState)(""),Ue=(0,c.default)(Ye,2),Ke=Ue[0],Ve=Ue[1],Je=(0,i.useState)(""),Ze=(0,c.default)(Je,2),Qe=Ze[0],$e=Ze[1],Xe=(0,i.useState)(""),et=(0,c.default)(Xe,2),tt=et[0],nt=et[1],ot=(0,i.useState)(""),it=(0,c.default)(ot,2),lt=it[0],at=it[1],rt=(0,i.useState)(""),st=(0,c.default)(rt,2),ct=st[0],dt=st[1],ut=(0,i.useState)(""),ft=(0,c.default)(ut,2),ht=ft[0],yt=ft[1],gt=(0,i.useState)(""),mt=(0,c.default)(gt,2),xt=mt[0],bt=mt[1],pt=F().userId,jt=(0,i.useState)("Submit your feedback"),wt=(0,c.default)(jt,2),St=wt[0],Ct=wt[1],kt=(0,i.useState)(!1),vt=(0,c.default)(kt,2),zt=vt[0],Tt=vt[1],At=(0,i.useState)(!1),It=(0,c.default)(At,2),Dt=It[0],Pt=It[1],Ft=(0,i.useState)("gray"),Wt=(0,c.default)(Ft,2),Et=Wt[0],qt=Wt[1];(0,i.useEffect)((function(){""!=x&&""!=w&&""!=v&&""!=I&&""!=q&&""!=H&&""!=_&&""!=K&&""!=ie&&""!=ce&&""!=ye&&""!=Ce&&""!=Te&&""!=Pe&&""!=qe&&""!=He&&""!=_e&&""!=Qe&&""!=tt&&""!=lt&&""!=ct&&""!=ht&&""!=Ke?(qt("#86A789"),f("")):qt("gray")}),[x,w,v,I,q,H,_,K,ie,ce,ye,Ce,Te,Pe,qe,He,_e,Qe,tt,lt,ct,ht,xt,Ke]);return(0,E.jsx)(Z.default,{style:{flex:1},children:(0,E.jsxs)(d.default,{style:Se.container,children:[(0,E.jsx)(d.default,{style:[Se.titleContainer,{height:l}],children:(0,E.jsx)(h.default,{style:Se.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,E.jsxs)(J.default,{contentContainerStyle:{height:o,backgroundColor:"white",paddingHorizontal:10*je,borderRadius:15*je,width:n,borderWidth:2*je,borderColor:"black",flexDirection:"column",justifyContent:"flex-start",overflow:"scroll",alignSelf:"center"},showsVerticalScrollIndicator:!0,children:[(0,E.jsx)(d.default,{style:Se.subTitleContainer,children:(0,E.jsx)(h.default,{style:Se.subTitle,children:X.prefix})}),(0,E.jsx)(xe,{question:$.acca,onChange:function(e){console.log("Selected option:",e),b(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.expa,onChange:function(e){console.log("Selected option:",e),S(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.expb,onChange:function(e){console.log("Selected option:",e),z(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.expc,onChange:function(e){console.log("Selected option:",e),D(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.intera,onChange:function(e){console.log("Selected option:",e),M(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.usefa,onChange:function(e){console.log("Selected option:",e),R(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.usefb,onChange:function(e){console.log("Selected option:",e),G(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.trusta,onChange:function(e){console.log("Selected option:",e),te(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.trustb,onChange:function(e){console.log("Selected option:",e),ae(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.eata,onChange:function(e){console.log("Selected option:",e),ue(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.extra,onChange:function(e){console.log("Selected option:",e),Ve(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.useia,onChange:function(e){console.log("Selected option:",e),ge(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.useib,onChange:function(e){console.log("Selected option:",e),ke(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.useic,onChange:function(e){console.log("Selected option:",e),Ae(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.quaa,onChange:function(e){console.log("Selected option:",e),Fe(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.ada,onChange:function(e){console.log("Selected option:",e),Me(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(xe,{question:$.adb,onChange:function(e){console.log("Selected option:",e),Re(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(xe,{question:$.botstyle,onChange:function(e){console.log("Selected option:",e),Ge(e)},containerStyle:Se.valcontainer}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsxs)(d.default,{style:Se.valcontainer,children:[(0,E.jsx)(de,{question:$.q1bl,options:["High school diploma / GED","Associate degree","Bachelor's degree","Trade school certification","Master's degree or higher education","Other (please specify):"],onChange:function(e){console.log("Selected option:",e),$e(e)}}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"text",value:xt,onChange:function(e){bt(e.target.value)},placeholder:"Please enter specific information here.",style:Se.input}),(0,E.jsx)(d.default,{style:Se.line})]})]}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(le,{question:$.q2bl,options:["Computer Science / Engineering","Creative Media / Design","Environmental Science","Physics / Chemistry / Biology","Business / Finance","Law","Medical Science / Healthcare","Publishing","Education","Social Science / Humanity","Service industry"],onChange:function(e){console.log("Selected option:",e),nt(e)},containerStyle:[Se.valcontainer,{marginTop:5}]}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(le,{question:$.q3bl,options:["American Indian or Alaskan Native","Asian","Black or African American","Caucasian or White","Hispanic or Latino","Native Hawaiian or Other Pacific Islander","Multiracial / Other","Prefer not to say"],onChange:function(e){console.log("Selected option:",e),at(e)},containerStyle:[Se.valcontainer,{marginTop:5}]}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsx)(le,{question:$.q4bl,options:["extroverted","introverted"],onChange:function(e){console.log("Selected option:",e),dt(e)},containerStyle:[Se.valcontainer,{marginTop:5}]}),(0,E.jsx)(h.default,{style:{fontSize:16*je,color:"white"},children:" "}),(0,E.jsxs)(d.default,{style:[Se.valcontainer,{marginTop:10}],children:[(0,E.jsx)(h.default,{style:[Se.question,{marginBottom:10}],children:$.q5bl}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"text",value:ht,onChange:function(e){yt(e.target.value)},placeholder:"Please enter your feedback here.",style:Se.input}),(0,E.jsx)(d.default,{style:Se.line})]})]}),(0,E.jsx)(d.default,{style:Se.valcontainer,children:(0,E.jsx)(h.default,{style:Se.warntexts,children:u})})]}),(0,E.jsx)(d.default,{style:[Se.bottomContainer,{height:l}],children:(0,E.jsx)(y.default,{style:[{marginRight:.1*be,width:.125*be,height:.03*pe,backgroundColor:Et,justifyContent:"center",alignItems:"center"},Dt&&{backgroundColor:"#597E52"}],onFocus:function(){Pt(!0)},onBlur:function(){Pt(!1)},onPress:(0,s.default)((function*(){if(""!=x&&""!=w&&""!=v&&""!=I&&""!=q&&""!=H&&""!=_&&""!=K&&""!=ie&&""!=ce&&""!=ye&&""!=Ce&&""!=Te&&""!=Pe&&""!=qe&&""!=He&&""!=_e&&""!=Qe&&""!=tt&&""!=lt&&""!=ct&&""!=ht&&""!=Ke){var e=ht.trim().split(" ").length;if(console.log("words:",e),"Other (please specify):"==Qe&&""==xt||e<5)f(e>=5?ee.edu:"Please enter more than 5 words in your feedback.");else if(1==!/^(?=.*[a-zA-Z])[\w\s.,?!;:'"()-]+$/.test(ht))f("Please enter meaningful thoughts and feedback.");else{Tt(!0);var n=yield Q(pt,x,w,v,I,q,H,_,K,ie,ce,ye,Ce,Te,Pe,qe,He,_e,Qe+"("+xt+")",tt,lt,ct,ht,Ke);console.log("status",n),f(""),Ct("Feedback submitted!"),t.navigate("SmartEats-Finish")}}else f("Please finish the survey, thanks!")})),disabled:zt,children:(0,E.jsx)(h.default,{style:Se.buttonText,children:St})})}),(0,E.jsx)(V.default,{style:"auto"})]})})}var Se=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"white",alignSelf:"center"},valcontainer:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white",marginBottom:10*je},bottomContainer:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},subTitleContainer:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white",alignSelf:"stretch",marginTop:15*je,marginBottom:15*je},subTitle:{fontFamily:"Arial",fontSize:18*je,color:"#597E52",fontWeight:"bold",marginLeft:75*je},title:{fontFamily:"Arial",fontSize:40*je,color:"#597E52",fontWeight:"bold"},input:{fontSize:16*je,border:"none",width:"200%",height:"100%",marginLeft:75*je,outlineWidth:"none"},line:{width:"200%",height:1*je,backgroundColor:"black",marginLeft:75*je,borderWidth:1*je},question:{fontFamily:"Arial",fontSize:16*je,color:"black",fontWeight:"bold",paddingHorizontal:75*je},button:{flexDirection:"column",marginLeft:75*je,width:"80%",height:"30%",backgroundColor:"#86A789",justifyContent:"center",alignItems:"center",left:"215%"},buttonText:{fontFamily:"Arial",color:"white",textAlign:"center",textAlignVertical:"center",fontSize:16*je},warntexts:{fontFamily:"Arial",fontSize:14*je,color:"red",marginLeft:75*je},bot:{width:70*je,height:70*je}}),Ce={intro:"Welcome to our research! You are invited to take part in a research study. Whether you take part is up to you.",reteam:"Principal Investigator: Dr. Yuhan Luo, Assistant Professor, City University of Hong Kong, Department of Computer Science;\nPrimary contact: Minhui Liang, Ph.D. Student, City University of Hong Kong, Department of Computer Science.",procedure:"In this survey, you will talk to a chatbot, which is designed to recommend personalized and healthy food for you. At the end of the conversation, you will be asked to decide whether you would like to take the recommend in the following week and a few questions about your conversation experience.\nThe survey consists of six parts: 1) filling out a short screening questionnaire to ensure that you meet the inclusion criteria; 2) providing your demographic and basic health information to prepare for the conversation; 3) customizing the chatbot (e.g., personality) according to your preference; 4) interacting with the chatbot to receive the recommendation; 5) providing your feedback with the recommending system; 6) You may receive a short follow-up survey in about one week after the study.\nOverall, the survey will take less than 15 minutes. Upon completion, you will receive 4 USD (~ 30 HKD or 3 GPB) to thank for your time.",risk:"The chatbot is powered by a large language model (LLM), which aims to recommend food by optimizing your eating preferences and health goals. While we have evaluated the recommendation results with professional nutritionists, the recommendation may not 100% fit your health profile. Therefore, the study is intended only for people *without* serious health concerns or food allergy.",bene:"1) You will have the opportunity to engage in a conversation with the latest large language model (LLM) and learn about their potentials.\n2) Through a short conversation with the chatbot, you will receive personalized food recommendations that could benefit your health.",confi:"All information gathered from this study will be kept confidential. Only the research team will have access to the data, and the raw data will be removed after the analysis is complete. Your privacy is of the utmost importance to us. Please note that you have the right to withdraw from this study at any time, particularly if you feel uncomfortable with the images presented."},ke=g.default.get("window").width,ve=g.default.get("window").height,ze=.65*Math.min(ke/320,ve/640);function Te(e){var t=e.navigation,n=.8*ke,o=.8*ve,l=.1*ve,a=(0,i.useState)(!1),r=(0,c.default)(a,2),s=r[0],u=r[1],f=(0,i.useState)(!1),g=(0,c.default)(f,2),m=g[0],x=g[1],b=(0,i.useState)(!1),p=(0,c.default)(b,2),j=p[0],w=p[1],S=(0,i.useState)("gray"),C=(0,c.default)(S,2),k=C[0],v=C[1],z=F(),T=(z.starttime,z.setStarttime);return(0,i.useEffect)((function(){v(1==s?"#86A789":"gray")}),[s]),(0,i.useEffect)((function(){var e=new Date;T(e)}),[]),(0,E.jsxs)(d.default,{style:Ae.container,children:[(0,E.jsx)(d.default,{style:[Ae.titleContainer,{height:l}],children:(0,E.jsx)(h.default,{style:Ae.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,E.jsxs)(d.default,{style:{height:o,backgroundColor:"white",paddingHorizontal:10*ze,borderRadius:15*ze,width:n,borderWidth:2*ze,borderColor:"black",flexDirection:"column",justifyContent:"flex-start",alignSelf:"center"},children:[(0,E.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:"Introduction"}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*ze,color:"black",paddingHorizontal:75*ze},children:Ce.intro}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:"Research Team"}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*ze,color:"black",paddingHorizontal:75*ze},children:Ce.reteam}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:"Study Procedure"}),(0,E.jsxs)(h.default,{style:{fontFamily:"Arial",fontSize:16*ze,color:"black",paddingHorizontal:75*ze},children:["In this survey, you will talk to a chatbot, which is designed to recommend personalized and healthy food for you. At the end of the conversation, you will be asked to decide whether you would like to take the recommendation in the following week and a few questions about your conversation experience.\nThe survey consists of five parts: 1) filling out a short screening questionnaire to ensure that you meet the inclusion criteria; 2) providing your demographic and basic health information to prepare for the conversation; 3) interacting with the chatbot to receive the recommendation; 4) providing your feedback with the recommending system;",(0,E.jsx)(h.default,{style:{color:"#597E52",fontWeight:"bold"},children:" 5) You may receive a short follow-up survey in about one week after the study."}),"\nOverall, the survey will take less than 15 minutes. Upon completion, you will receive a compensation equivalent to 2.8 USD (~ GBP 2.25, or HKD 22) to thank for your time."]}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:"Potential Risk"}),(0,E.jsxs)(h.default,{style:{fontFamily:"Arial",fontSize:16*ze,color:"black",paddingHorizontal:75*ze},children:["The chatbot is powered by a large language model (LLM), which aims to recommend food by optimizing your eating preferences and health goals. While we have evaluated the recommendation results with professional nutritionists, the recommendation may not 100% fit your health profile. Therefore, the study is intended only for people ",(0,E.jsx)(h.default,{style:{color:"#597E52",fontWeight:"bold"},children:"without"})," serious health concerns or food allergy."]}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:"Benefits"}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*ze,color:"black",paddingHorizontal:75*ze},children:Ce.bene}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:"Confidentiality"}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*ze,color:"black",paddingHorizontal:75*ze},children:Ce.confi}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:" "}),(0,E.jsx)(h.default,{style:Ae.question,children:"Do you consent to participate in the study?"}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:s,onChange:function(e){u(e.target.checked),x(!1)},style:Ae.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*ze,color:"black"},children:"Yes, I consent."})]}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:m,onChange:function(e){x(e.target.checked),u(!1)},style:Ae.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*ze,color:"black"},children:"No, I do not consent."})]}),(0,E.jsx)(h.default,{style:Ae.subTitle,children:" "})]}),(0,E.jsx)(d.default,{style:[Ae.subTitleContainer,{height:l}],children:(0,E.jsx)(y.default,{style:[{marginRight:.1*ke,width:.145*ke,height:.03*ve,backgroundColor:k,justifyContent:"center",alignItems:"center"},j&&{backgroundColor:"#597E52"}],onFocus:function(){w(!0)},onBlur:function(){w(!1)},onPress:function(){s&&t.navigate("SmartEats-ScreeningQuestion")},children:(0,E.jsx)(h.default,{style:Ae.texts,children:"Next: Screening Questions"})})}),(0,E.jsx)(V.default,{style:"auto"})]})}var Ae=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"white",alignSelf:"center"},subTitleContainer:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainer:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},eleContainerPlus:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},eleContainerSub:{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},title:{fontFamily:"Arial",fontSize:40*ze,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:20*ze,color:"black",fontWeight:"bold",marginLeft:75*ze},question:{fontFamily:"Arial",fontSize:20*ze,color:"#597E52",fontWeight:"bold",marginLeft:75*ze},texts:{fontFamily:"Arial",fontSize:16*ze,color:"white"},checkbox:{marginLeft:75*ze,height:16*ze,width:16*ze},bot:{marginBottom:20*ze,marginLeft:15*ze,width:65*ze,height:65*ze}}),Ie={prefix:"Before proceeding to the survey, we need to make sure that you meet the inclusion criteria by asking the following questions.",first:"1. Are you over 18?",second:"2. What is your English fluency in reading and writing?",third:"3. Are you interested in using an AI chatbot for food recommendation?",fourth:"4. Are you currently dealing with any severe health conditions that require you to be extremely cautious about your diet (e.g., Coronary heart disease, diabetic ketoacidosis (DKA), renal failure)?",fifth:"1. What is your biological sex?",sixth:"2. How old are you?",seventh:"3. What is your height (cm)?",eighth:"4. What is your weight (kg)?",ninth:"5. Which country/region do you currently live in?",tenth:"6. Do you have any dietary restrictions (e.g., vegetarianism)? You may skip this question if it does not apply to you.",eleventh:"7. Are there any specific aspects of your health that you would like to improve (e.g., energy level, physical fitness, sleep quality, immunity)?",twelfth:"8. How do you want us to address you?",thirteenth:"9. Your email address:",cus:"Customize the chatbot before proceeding to the conversation."},De=g.default.get("window").width,Pe=g.default.get("window").height,Fe=.65*Math.min(De/320,Pe/640);function We(e){var t=e.navigation,n=.8*De,o=(0,i.useState)(!1),l=(0,c.default)(o,2),a=l[0],r=l[1],s=(0,i.useState)(!1),u=(0,c.default)(s,2),f=u[0],g=u[1],m=(0,i.useState)(!1),x=(0,c.default)(m,2),b=x[0],p=x[1],j=(0,i.useState)(!1),w=(0,c.default)(j,2),S=w[0],C=w[1],k=(0,i.useState)(!1),v=(0,c.default)(k,2),z=v[0],T=v[1],A=(0,i.useState)(!1),I=(0,c.default)(A,2),D=I[0],P=I[1],F=(0,i.useState)(!1),W=(0,c.default)(F,2),q=W[0],M=W[1],O=(0,i.useState)(!1),L=(0,c.default)(O,2),H=L[0],R=L[1],B=(0,i.useState)(!1),N=(0,c.default)(B,2),_=N[0],G=N[1],Y=(0,i.useState)(!1),U=(0,c.default)(Y,2),K=U[0],Z=U[1],Q=(0,i.useState)(!1),$=(0,c.default)(Q,2),X=$[0],te=$[1],ne=(0,i.useState)(""),oe=(0,c.default)(ne,2),ie=oe[0],le=oe[1],ae=(0,i.useState)("gray"),re=(0,c.default)(ae,2),se=re[0],ce=re[1];return(0,i.useEffect)((function(){1!=a||1!=z&&1!=D||1!=q||1!=K?ce("gray"):(ce("#86A789"),le(""))}),[a,z,D,q,K]),(0,E.jsxs)(J.default,{contentContainerStyle:Ee.container,children:[(0,E.jsx)(d.default,{style:Ee.titleContainer,children:(0,E.jsx)(h.default,{style:Ee.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,E.jsxs)(J.default,{contentContainerStyle:{flex:9,backgroundColor:"white",paddingHorizontal:10*Fe,borderRadius:15*Fe,width:n,borderWidth:2*Fe,borderColor:"black",flexDirection:"column",justifyContent:"center",alignSelf:"center"},children:[(0,E.jsx)(d.default,{style:Ee.subTitleContainer,children:(0,E.jsx)(h.default,{style:Ee.subTitle,children:Ie.prefix})}),(0,E.jsxs)(d.default,{style:Ee.eleContainer,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black",fontWeight:"bold",paddingHorizontal:75*Fe},children:Ie.first}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:a,onChange:function(e){r(e.target.checked),g(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Yes"})]}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:f,onChange:function(e){g(e.target.checked),r(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"No"})]})]}),(0,E.jsxs)(d.default,{style:Ee.eleContainerPlus,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black",fontWeight:"bold",paddingHorizontal:75*Fe},children:Ie.second}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:b,onChange:function(e){p(e.target.checked),C(!1),T(!1),P(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Not fluent at all"})]}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:S,onChange:function(e){C(e.target.checked),p(!1),T(!1),P(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"A little bit"})]}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:z,onChange:function(e){T(e.target.checked),p(!1),C(!1),P(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Fluent"})]}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:D,onChange:function(e){P(e.target.checked),p(!1),C(!1),T(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"I am a native speaker"})]})]}),(0,E.jsxs)(d.default,{style:Ee.eleContainer,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black",fontWeight:"bold",paddingHorizontal:75*Fe},children:Ie.third}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:q,onChange:function(e){M(e.target.checked),R(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Yes"})]}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:H,onChange:function(e){R(e.target.checked),M(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"No"})]})]}),(0,E.jsxs)(d.default,{style:Ee.eleContainer,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black",fontWeight:"bold",paddingHorizontal:75*Fe},children:Ie.fourth}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:_,onChange:function(e){G(e.target.checked),Z(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"Yes"})]}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:K,onChange:function(e){Z(e.target.checked),G(!1)},style:Ee.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*Fe,color:"black"},children:"No"})]})]}),(0,E.jsx)(d.default,{style:Ee.eleContainerSub,children:(0,E.jsx)(h.default,{style:Ee.warntexts,children:ie})})]}),(0,E.jsx)(d.default,{style:Ee.bottomContainer,children:(0,E.jsx)(y.default,{style:[{marginRight:.1*De,width:.105*De,height:.03*Pe,backgroundColor:se,justifyContent:"center",alignItems:"center"},X&&{backgroundColor:"#597E52"}],onFocus:function(){te(!0)},onBlur:function(){te(!1)},onPress:function(){1!=a||1!=z&&1!=D||1!=q||1!=K?0==a&&0==f||0==b&&0==S&&0==z&&0==D||0==q&&0==H||0==_&&0==K?le(ee.notfinish):1!=f&&1!=b&&1!=S&&1!=H&&1!=_||le(ee.notqali):(le(""),t.navigate("SmartEats-UserProfile"))},children:(0,E.jsx)(h.default,{style:Ee.texts,children:"Next: User Profile"})})}),(0,E.jsx)(V.default,{style:"auto"})]})}var Ee=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flex:.5,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"white",alignSelf:"center"},subTitleContainer:{flex:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},bottomContainer:{flex:.5,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainerSub:{flex:.3,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},eleContainer:{flex:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},eleContainerPlus:{flex:1.4,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},title:{fontFamily:"Arial",fontSize:40*Fe,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:18*Fe,color:"#597E52",fontWeight:"bold",marginLeft:75*Fe},texts:{fontFamily:"Arial",fontSize:16*Fe,color:"white",textAlign:"center"},warntexts:{fontFamily:"Arial",fontSize:14*Fe,color:"red",marginLeft:75*Fe},checkbox:{marginLeft:75*Fe,height:16*Fe,width:16*Fe},bot:{marginBottom:20*Fe,marginLeft:15*Fe,width:65*Fe,height:65*Fe}}),qe=n(1021);const Me=function(e,t,n,o,i,l,a,r){return Math.floor(4*Math.random()).toString(),new Promise((function(s,c){var d={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({email:e,gender:t,age:n,height:o,weight:i,location:l,contraindication:a,healthconcern:r})};fetch("https://www.foodcrs.com/home",d).then((function(e){return e.json()})).then((function(e){return s(e.status)})).catch((function(e){return c(e)}))}))};var Oe=g.default.get("window").width,Le=g.default.get("window").height,He=.65*Math.min(Oe/320,Le/640);function Re(e){var t=e.navigation,n=.8*Oe,o=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,l=(0,i.useState)(!1),a=(0,c.default)(l,2),r=a[0],u=a[1],f=(0,i.useState)(!1),g=(0,c.default)(f,2),m=g[0],x=g[1],b=(0,i.useState)(!1),p=(0,c.default)(b,2),j=p[0],w=p[1],S=(0,i.useState)(""),C=(0,c.default)(S,2),k=C[0],v=C[1],z=(0,i.useState)(""),T=(0,c.default)(z,2),A=T[0],I=T[1],D=(0,i.useState)(""),P=(0,c.default)(D,2),W=P[0],q=P[1],M=(0,i.useState)(""),O=(0,c.default)(M,2),L=O[0],H=O[1],R=(0,i.useState)(""),B=(0,c.default)(R,2),N=B[0],_=B[1],G=(0,i.useState)(""),Y=(0,c.default)(G,2),U=Y[0],K=Y[1],Z=(0,i.useState)(""),Q=(0,c.default)(Z,2),$=Q[0],X=Q[1],te=(0,i.useState)(""),ne=(0,c.default)(te,2),oe=ne[0],ie=ne[1],le=(0,i.useState)(""),ae=(0,c.default)(le,2),re=ae[0],se=ae[1],ce=(0,i.useState)(""),de=(0,c.default)(ce,2),ue=de[0],fe=de[1],he=(0,i.useState)(!1),ye=(0,c.default)(he,2),ge=ye[0],me=ye[1],xe=(0,i.useState)(!1),be=(0,c.default)(xe,2),pe=be[0],je=be[1],we=(0,i.useState)("gray"),Se=(0,c.default)(we,2),Ce=Se[0],ke=Se[1],ve=F(),ze=(ve.userId,ve.setUserId);return(0,i.useEffect)((function(){null==k||null==A||null==W||1!=r&&1!=m&&1!=j||""==L||""==N||""==oe||""==re?ke("gray"):(ke("#86A789"),fe(""))}),[k,A,W,r,m,j,L,N,oe,re]),(0,E.jsxs)(J.default,{contentContainerStyle:Be.container,children:[(0,E.jsx)(d.default,{style:Be.titleContainer,children:(0,E.jsx)(h.default,{style:Be.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,E.jsxs)(J.default,{contentContainerStyle:{flex:9,backgroundColor:"white",paddingHorizontal:10*He,borderRadius:15*He,width:n,borderWidth:2*He,borderColor:"black",flexDirection:"column",justifyContent:"center",alignSelf:"center"},children:[(0,E.jsxs)(d.default,{style:Be.eleContainerPlus,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black",fontWeight:"bold",paddingHorizontal:75*He},children:Ie.fifth}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:m,onChange:function(e){x(e.target.checked),u(!1),w(!1)},style:Be.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black"},children:"Female"})]}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:j,onChange:function(e){w(e.target.checked),u(!1),x(!1)},style:Be.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black"},children:"Intersex"})]}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"radio",checked:r,onChange:function(e){u(e.target.checked),x(!1),w(!1)},style:Be.checkbox}),(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black"},children:"Male"})]})]}),(0,E.jsxs)(d.default,{style:Be.eleContainer,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black",fontWeight:"bold",paddingHorizontal:75*He},children:Ie.sixth}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"number",min:"18",max:"120",value:k,onChange:function(e){v(e.target.value)},placeholder:"Please enter your age.",style:Be.input}),(0,E.jsx)(d.default,{style:Be.line})]})]}),(0,E.jsxs)(d.default,{style:Be.eleContainer,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black",fontWeight:"bold",paddingHorizontal:75*He},children:Ie.seventh}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"number",min:"100",max:"220",value:A,onChange:function(e){I(e.target.value)},placeholder:"Please enter your height.",style:Be.input}),(0,E.jsx)(d.default,{style:Be.line})]})]}),(0,E.jsxs)(d.default,{style:Be.eleContainer,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black",fontWeight:"bold",paddingHorizontal:75*He},children:Ie.eighth}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"number",min:"30",max:"150",value:W,onChange:function(e){q(e.target.value)},placeholder:"Please enter your weight.",style:Be.input}),(0,E.jsx)(d.default,{style:Be.line})]})]}),(0,E.jsxs)(d.default,{style:Be.eleContainerMid,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black",fontWeight:"bold",paddingHorizontal:75*He},children:Ie.ninth}),(0,E.jsx)(qe.CountryDropdown,{style:{width:"15%",height:"20%",marginLeft:75*He},value:L,onChange:function(e){return H(e)}}),(0,E.jsx)(qe.RegionDropdown,{style:{width:"15%",height:"20%",marginLeft:75*He},country:L,value:N,onChange:function(e){return _(e)}})]}),(0,E.jsxs)(d.default,{style:[Be.eleContainer,{bottom:"3.5%"}],children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black",fontWeight:"bold",paddingHorizontal:75*He},children:Ie.tenth}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"text",value:U,onChange:function(e){K(e.target.value)},placeholder:"Please enter your food restrictions(if any).",style:Be.input}),(0,E.jsx)(d.default,{style:Be.line})]})]}),(0,E.jsxs)(d.default,{style:[Be.eleContainer,{bottom:"3%"}],children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black",fontWeight:"bold",paddingHorizontal:75*He},children:Ie.eleventh}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"text",value:$,onChange:function(e){X(e.target.value)},placeholder:"Please enter your health condition(if any).",style:Be.input}),(0,E.jsx)(d.default,{style:Be.line})]})]}),(0,E.jsxs)(d.default,{style:Be.eleContainer,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black",fontWeight:"bold",paddingHorizontal:75*He},children:Ie.twelfth}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"text",value:oe,onChange:function(e){ie(e.target.value)},placeholder:"Please enter your name.",style:Be.input}),(0,E.jsx)(d.default,{style:Be.line})]})]}),(0,E.jsxs)(d.default,{style:Be.eleContainer,children:[(0,E.jsx)(h.default,{style:{fontFamily:"Arial",fontSize:16*He,color:"black",fontWeight:"bold",paddingHorizontal:75*He},children:Ie.thirteenth}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"text",value:re,onChange:function(e){se(e.target.value)},placeholder:"Please enter your email.",style:Be.input}),(0,E.jsx)(d.default,{style:Be.line})]})]}),(0,E.jsx)(d.default,{style:Be.eleContainerSub,children:(0,E.jsx)(h.default,{style:Be.warntexts,children:ue})})]}),(0,E.jsx)(d.default,{style:Be.bottomContainer,children:(0,E.jsx)(y.default,{style:[{marginRight:.1*Oe,width:.155*Oe,height:.03*Le,backgroundColor:Ce,justifyContent:"center",alignItems:"center"},pe&&{backgroundColor:"#597E52"}],onFocus:function(){je(!0)},onBlur:function(){je(!1)},onPress:(0,s.default)((function*(){if(null==k||null==A||null==W||1!=r&&1!=m&&1!=j||""==L||""==N||""==oe||""==re)fe(""==k?ee.age:""==A?ee.height:""==W?ee.weight:r||m||j?""==L?ee.country:""==N?ee.region:""==oe?ee.name:""==re?ee.email:ee.notfinish:ee.gender);else if(Number(k)>120||Number(k)<18)fe(ee.age);else if(Number(A)<100||Number(A)>220)fe(ee.height);else if(Number(W)<30||Number(W)>150)fe(ee.weight);else if(o.test(re)){var e=null;!m||j||r||(e="female"),m||!j||r||(e="intersex"),m||j||!r||(e="male"),me(!0),fe(""),""==U&&K("none"),""==$&&X("none"),console.log("here"),ze(re);var n=yield Me(re,e,k,A,W,L+", "+N,U,$);console.log("status",n),t.navigate("SmartEats-ChatbotAvatar")}else fe(ee.email)})),disabled:ge,children:(0,E.jsx)(h.default,{style:Be.texts,children:"Next: Chatbot Avatar"})})}),(0,E.jsx)(V.default,{style:"auto"})]})}var Be=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flex:.5,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"white",alignSelf:"center"},subTitleContainer:{flex:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},bottomContainer:{flex:.5,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainerSub:{flex:.3,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},eleContainer:{flex:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},eleContainerMid:{flex:1.5,flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:"white"},eleContainerPlus:{flex:2,flexDirection:"column",alignItems:"flex-start",justifyContent:"center",backgroundColor:"white"},title:{fontFamily:"Arial",fontSize:40*He,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:18*He,color:"#DE8F5F",fontWeight:"bold",marginLeft:75},texts:{fontFamily:"Arial",fontSize:16*He,color:"white",textAlign:"center"},warntexts:{fontFamily:"Arial",fontSize:14*He,color:"red",marginLeft:75*He},checkbox:{marginLeft:75*He,height:16*He,width:16*He},input:{fontSize:16*He,padding:0,border:"none",width:"180%",height:"120%",marginLeft:75*He,borderBottomWidth:2*He},line:{width:"180%",height:1*He,backgroundColor:"black",marginLeft:75*He,borderWidth:1*He},bot:{marginBottom:20*He,marginLeft:15*He,width:65*He,height:65*He}});const Ne=function(e,t,n){return Math.floor(4*Math.random()).toString(),new Promise((function(o,i){var l={method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({uid:e,proid:t,surveytime:n})};fetch("https://www.foodcrs.com/proid",l).then((function(e){return e.json()})).then((function(e){return o(e.status)})).catch((function(e){return i(e)}))}))};var _e=g.default.get("window").width,Ge=g.default.get("window").height,Ye=.65*Math.min(_e/320,Ge/640);function Ue(){var e=.8*_e,t=(0,i.useState)(""),n=(0,c.default)(t,2),o=n[0],l=n[1],a=(0,i.useState)(!1),r=(0,c.default)(a,2),u=r[0],f=r[1],g=(0,i.useState)("gray"),m=(0,c.default)(g,2),x=m[0],b=m[1],p=(0,i.useState)("Finish the survey"),j=(0,c.default)(p,2),w=j[0],S=j[1],C=(0,i.useState)(""),k=(0,c.default)(C,2),v=k[0],z=k[1],T=(0,i.useState)(!1),A=(0,c.default)(T,2),I=A[0],D=A[1],P=(0,i.useState)(null),W=(0,c.default)(P,2),q=W[0],M=W[1],O=F().userId,L=F().starttime;return(0,i.useEffect)((function(){b(""!=o?"#86A789":"gray")}),[o]),(0,i.useEffect)((function(){var e=(new Date-L)/1e3;console.log("surveytime: ",e),M(e)}),[]),(0,E.jsxs)(d.default,{style:Ke.container,children:[(0,E.jsx)(d.default,{style:Ke.titleContainer,children:(0,E.jsx)(h.default,{style:Ke.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,E.jsxs)(d.default,{style:{flex:9,width:e,backgroundColor:"white",paddingHorizontal:10*Ye,borderRadius:15*Ye,borderWidth:2*Ye,borderColor:"black",flexDirection:"column",justifyContent:"center",alignItems:"center",alignSelf:"center"},children:[(0,E.jsx)(d.default,{style:Ke.eleContainerPlus,children:(0,E.jsx)(h.default,{style:Ke.subTitle,children:"Thank you for participating in our study! \ud83c\udf89\nWe will follow up with a short survey checking your diet in one week. \ud83d\udc96"})}),(0,E.jsx)(d.default,{style:Ke.eleContainerSub,children:(0,E.jsx)(h.default,{style:Ke.subTitle,children:" "})}),(0,E.jsxs)(d.default,{style:Ke.eleContainer,children:[(0,E.jsx)(h.default,{style:Ke.question,children:"Please enter your prolific ID or FPS (for Hong Kong participants only): "}),(0,E.jsx)(h.default,{style:Ke.promptTexts,children:"(make sure you click \u201cFinish the survey\u201d button before leaving):"}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"text",value:o,onChange:function(e){z(""),l(e.target.value)},placeholder:"Please enter your prolific ID or FPS here",style:Ke.input}),(0,E.jsx)(d.default,{style:Ke.line})]}),(0,E.jsx)(h.default,{style:Ke.code,children:" "}),(0,E.jsx)(h.default,{style:Ke.code,children:" "}),(0,E.jsx)(h.default,{style:Ke.code,children:" "}),(0,E.jsx)(h.default,{style:Ke.code,children:"Your completion code: C2FX1FPE"})]}),(0,E.jsx)(d.default,{style:Ke.eleContainerSub,children:(0,E.jsx)(h.default,{style:Ke.warnText,children:v})})]}),(0,E.jsx)(d.default,{style:Ke.subTitleContainer,children:(0,E.jsx)(y.default,{style:[{width:.1*_e,height:.03*Ge,backgroundColor:x,justifyContent:"center",alignItems:"center",marginRight:.1*_e},u&&{backgroundColor:"#597E52"}],onFocus:function(){f(!0)},onBlur:function(){f(!1)},onPress:(0,s.default)((function*(){if(""!=o){D(!0),z("");var e=yield Ne(O,o,q);console.log("status",e),S("Submitted \ud83c\udf8a")}else z("Please enter your prolific ID")})),disabled:I,children:(0,E.jsx)(h.default,{style:Ke.texts,children:w})})}),(0,E.jsx)(V.default,{style:"auto"})]})}var Ke=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flex:1,flexDirection:"row",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"white"},subTitleContainer:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainer:{flex:1.5,backgroundColor:"white"},eleContainerPlus:{flex:1.8,flexDirection:"column",justifyContent:"flex-end",backgroundColor:"white"},eleContainerSub:{flex:.5,backgroundColor:"white"},title:{fontFamily:"Arial",fontSize:40*Ye,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:30*Ye,color:"black",fontWeight:"bold"},question:{fontFamily:"Arial",fontSize:18*Ye,color:"#597E52",fontWeight:"bold",marginLeft:30*Ye,marginBottom:10*Ye},texts:{fontFamily:"Arial",fontSize:16*Ye,color:"white"},code:{fontFamily:"Arial",fontSize:16*Ye,fontWeight:"bold",color:"black",marginLeft:30*Ye},promptTexts:{fontFamily:"Arial",fontSize:15*Ye,color:"black",marginLeft:30*Ye,marginBottom:10*Ye},bot:{marginBottom:20*Ye,marginLeft:15*Ye,width:65*Ye,height:65*Ye},input:{fontSize:16*Ye,border:"none",width:"63%",height:"100%",marginLeft:30*Ye,outlineWidth:"none"},line:{width:"63%",height:1*Ye,backgroundColor:"black",marginLeft:30*Ye,borderWidth:1*Ye},warnText:{fontFamily:"Arial",fontSize:14*Ye,color:"red"}}),Ve=g.default.get("window").width,Je=g.default.get("window").height,Ze=.65*Math.min(Ve/320,Je/640);function Qe(e){var t=e.navigation,n=.8*Ve,o=(0,i.useState)(""),l=(0,c.default)(o,2),a=l[0],r=l[1],u=(0,i.useState)(""),f=(0,c.default)(u,2),g=f[0],m=f[1],x=(0,i.useState)(!1),b=(0,c.default)(x,2),p=b[0],j=b[1],w=(0,i.useState)("gray"),S=(0,c.default)(w,2),C=S[0],k=S[1],v=(0,i.useState)("Next: Introduction"),z=(0,c.default)(v,2),T=z[0],A=(z[1],(0,i.useState)("")),I=(0,c.default)(A,2),D=I[0],P=I[1],F=(0,i.useState)(!1),W=(0,c.default)(F,2),q=W[0],M=W[1],O="tester",L=/^DTSGX[abcdefghijklmnopqrstuvwxyz]$/;function H(e){return L.test(e)}return(0,i.useEffect)((function(){a==O&&H(g)?k("#86A789"):k("gray")}),[a,g]),(0,E.jsxs)(d.default,{style:$e.container,children:[(0,E.jsx)(d.default,{style:$e.titleContainer,children:(0,E.jsx)(h.default,{style:$e.title,children:"A Survey Study on Chatbot-Based Dietary Recommendation"})}),(0,E.jsxs)(d.default,{style:{flex:9,width:n,backgroundColor:"white",paddingHorizontal:10*Ze,borderRadius:15*Ze,borderWidth:2*Ze,borderColor:"black",flexDirection:"column",justifyContent:"center",alignItems:"center",alignSelf:"center"},children:[(0,E.jsxs)(d.default,{style:$e.eleContainer,children:[(0,E.jsx)(h.default,{style:$e.question,children:"Please enter your ID: "}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"text",value:a,onChange:function(e){P(""),r(e.target.value)},placeholder:"Please enter your ID here",style:$e.input}),(0,E.jsx)(d.default,{style:$e.line})]}),(0,E.jsx)(h.default,{style:{fontSize:20*Ze,color:"white"},children:" "}),(0,E.jsx)(h.default,{style:{fontSize:20*Ze,color:"white"},children:" "}),(0,E.jsx)(h.default,{style:$e.question,children:"Please enter your password: "}),(0,E.jsxs)("div",{className:"input-line",children:[(0,E.jsx)("input",{type:"text",value:g,onChange:function(e){P(""),m(e.target.value)},placeholder:"Please enter your password here",style:$e.input}),(0,E.jsx)(d.default,{style:$e.line})]}),(0,E.jsx)(h.default,{style:{fontSize:20*Ze,color:"white"},children:" "}),(0,E.jsx)(h.default,{style:{fontSize:20*Ze,color:"white"},children:" "}),(0,E.jsxs)(h.default,{style:{fontFamily:"Arial",fontSize:18*Ze},children:["For better readability of the webpage, please make sure your browser is in its ",(0,E.jsx)(h.default,{style:{fontWeight:"bold"},children:"maximal"})," width."]})]}),(0,E.jsx)(d.default,{style:$e.eleContainerSub,children:(0,E.jsx)(h.default,{style:$e.warnText,children:D})})]}),(0,E.jsx)(d.default,{style:$e.subTitleContainer,children:(0,E.jsx)(y.default,{style:[{width:.105*Ve,height:.03*Je,backgroundColor:C,justifyContent:"center",alignItems:"center",marginRight:.1*Ve},p&&{backgroundColor:"#597E52"}],onFocus:function(){j(!0)},onBlur:function(){j(!1)},onPress:(0,s.default)((function*(){a==O&&H(g)?(M(!0),P(""),t.navigate("SmartEats-Introduction")):P("Incorrect user name or password.")})),disabled:q,children:(0,E.jsx)(h.default,{style:$e.texts,children:T})})}),(0,E.jsx)(V.default,{style:"auto"})]})}var $e=u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{flex:1,flexDirection:"row",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"white"},subTitleContainer:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},eleContainer:{flex:3,flexDirection:"column",backgroundColor:"white",justifyContent:"center",alignItems:"flex-start",marginTop:50*Ze},eleContainerSub:{flex:.5,flexDirection:"column",backgroundColor:"white",justifyContent:"center",alignItems:"center"},title:{fontFamily:"Arial",fontSize:40*Ze,color:"#597E52",fontWeight:"bold"},subTitle:{fontFamily:"Arial",fontSize:30*Ze,color:"black",fontWeight:"bold"},question:{fontFamily:"Arial",fontSize:18*Ze,color:"#597E52",fontWeight:"bold",marginBottom:10*Ze},texts:{fontFamily:"Arial",fontSize:16*Ze,color:"white"},promptTexts:{fontFamily:"Arial",fontSize:15*Ze,color:"black",marginLeft:112*Ze,marginBottom:10*Ze},bot:{marginBottom:20*Ze,marginLeft:15*Ze,width:65*Ze,height:65*Ze},input:{fontSize:16*Ze,border:"none",width:"150%",height:"100%",outlineWidth:"none"},line:{width:"150%",height:1*Ze,backgroundColor:"black",borderWidth:1*Ze},warnText:{fontFamily:"Arial",fontSize:14*Ze,color:"red"}}),Xe=g.default.get("window").width,et=g.default.get("window").height,tt=.65*Math.min(Xe/320,et/640);u.default.create({container:{flex:1,flexDirection:"column",backgroundColor:"white",justifyContent:"center"},titleContainer:{height:.1*et,flexDirection:"row",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"white"},subTitleContainer:{height:.1*et,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white",alignSelf:"flex-end"},title:{fontFamily:"Arial",fontSize:40*tt,color:"#597E52",fontWeight:"bold"},texts:{fontFamily:"Arial",fontSize:16*tt,color:"white"},avatar:{backgroundColor:"white",paddingHorizontal:10*tt,flexDirection:"row",justifyContent:"center",alignItems:"center"},sigAva:{backgroundColor:"white",paddingHorizontal:10*tt,flexDirection:"column",justifyContent:"center",alignItems:"center"},textsub:{fontFamily:"Arial",fontSize:18*tt,color:"black"},textbBold:{fontFamily:"Arial",fontSize:18*tt,color:"black",fontWeight:"bold"},bot:{width:75*tt,height:75*tt}});var nt=(0,a.default)();(0,o.default)((function(){return(0,E.jsx)(l.default,{children:(0,E.jsxs)(nt.Navigator,{screenOptions:{headerShown:!1},children:[(0,E.jsx)(nt.Screen,{name:"SmartEats-login",component:Qe}),(0,E.jsx)(nt.Screen,{name:"SmartEats-Introduction",component:Te}),(0,E.jsx)(nt.Screen,{name:"SmartEats-ScreeningQuestion",component:We}),(0,E.jsx)(nt.Screen,{name:"SmartEats-UserProfile",component:Re}),(0,E.jsx)(nt.Screen,{name:"SmartEats-Chat",component:K}),(0,E.jsx)(nt.Screen,{name:"SmartEats-Feedback",component:we}),(0,E.jsx)(nt.Screen,{name:"SmartEats-Finish",component:Ue})]})})}))},1983:(e,t,n)=>{e.exports=n.p+"static/media/congrats.b5a90506df7dad69794b.png"},3361:(e,t,n)=>{e.exports=n.p+"static/media/negative.0101b3d353c83e3d6dfe.png"},9298:(e,t,n)=>{e.exports=n.p+"static/media/neutral.c84c0e621dcfa7d154ea.png"},6724:(e,t,n)=>{e.exports=n.p+"static/media/positive.ccce4d1ffc7d446ef534.png"},4719:(e,t,n)=>{e.exports=n.p+"static/media/rec.4752a8a97a90070a6730.png"},94:(e,t,n)=>{e.exports=n.p+"static/media/sorry.cdc3dc5f4186225bf544.png"},5481:(e,t,n)=>{e.exports=n.p+"static/media/waiting.2a4415f55e0d6522f877.png"}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,(()=>{var e=[];n.O=(t,o,i,l)=>{if(!o){var a=1/0;for(d=0;d<e.length;d++){for(var[o,i,l]=e[d],r=!0,s=0;s<o.length;s++)(!1&l||a>=l)&&Object.keys(n.O).every((e=>n.O[e](o[s])))?o.splice(s--,1):(r=!1,l<a&&(a=l));if(r){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[o,i,l]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,i){if(1&i&&(o=this(o)),8&i)return o;if("object"===typeof o&&o){if(4&i&&o.__esModule)return o;if(16&i&&"function"===typeof o.then)return o}var l=Object.create(null);n.r(l);var a={};e=e||[null,t({}),t([]),t(t)];for(var r=2&i&&o;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((e=>a[e]=()=>o[e]));return a.default=()=>o,n.d(l,a),l}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/FoodRSWeb/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,l,[a,r,s]=o,c=0;if(a.some((t=>0!==e[t]))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(s)var d=s(n)}for(t&&t(o);c<a.length;c++)l=a[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(d)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[45],(()=>n(3185)));o=n.O(o)})();